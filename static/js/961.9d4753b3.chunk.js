"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[961],{3217:function(e,t,a){a(2791);t.Z=a.p+"static/media/search.1769d7a66264f66c9ae9cfe98c03017d.svg"},9474:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var i=a(1413),n=a(3433),c=a(9439),o=a(2791),s=a(7689),l=a(3108),r=a(5382),d=a(763),m=a.n(d),p=a(8214),h=a(9655),u=(a(5462),a(9806)),g=a(1632),f=a(4297),b=a(9770),v=a(3217),x=a(184),j=function(e){var t=e.socket,a=(0,o.useContext)(l.V),d=(0,s.s0)(),j=(0,s.UO)().type,N=(0,s.UO)().id,C=(0,o.useState)([]),k=(0,c.Z)(C,2),Z=k[0],_=k[1],y=(0,o.useState)([]),w=(0,c.Z)(y,2),S=w[0],T=w[1],I=(0,o.useState)(!1),U=(0,c.Z)(I,2),P=U[0],F=U[1],O=(0,o.useState)(!1),E=(0,c.Z)(O,2),B=E[0],z=E[1],R=(0,o.useState)(!1),D=(0,c.Z)(R,2),G=D[0],H=D[1],M=(0,o.useState)(!1),W=(0,c.Z)(M,2),A=W[0],J=W[1],L=(0,o.useState)(!1),V=(0,c.Z)(L,2),q=V[0],K=V[1],Q=(0,o.useState)(!1),X=(0,c.Z)(Q,2),Y=X[0],$=X[1],ee=(0,o.useState)(""),te=(0,c.Z)(ee,2),ae=te[0],ie=te[1],ne=(0,o.useRef)(""),ce=(0,o.useState)("#FCB016"),oe=(0,c.Z)(ce,2),se=oe[0],le=oe[1],re=(0,o.useState)({}),de=(0,c.Z)(re,2),me=de[0],pe=de[1],he=(0,o.useRef)(S);(0,o.useEffect)((function(){a.showFooterHandler(!0),"movie"===j?le("#FCB016"):"tv"===j?le("#FF4D4D"):"game"===j?le("#2482C5"):"board"===j&&le("#45B859"),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(N),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){ie(e.name),e.items&&(he.current=e.items.map((function(e){return{itemId:e.itemId,mongoId:e._id}})),T(he.current))}))}),[a,j,N]);var ue=function(e){if(""===e||void 0===e||null===e)return _([]),H(!1),F(!1),void $(!1);fetch("https://choice-champ-backend.glitch.me/media/".concat(j,"/").concat(e,"/1")).then((function(e){return e.json()})).then((function(e){if(0===e.media.results.length)return _([]),F(!1),void H(!0);_([]),e.media.results.forEach((function(e){var t=!1;he.current.forEach((function(a){("game"!==j&&a.itemId===e.id||"game"===j&&a.itemId===e.guid)&&(t=!0)})),"movie"===j?(null===e.poster_path||void 0===e.poster_path||""===e.poster_path?e.poster_path="https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/image-not-found-500-750.png?v=1720192338848":e.poster_path="https://image.tmdb.org/t/p/w500".concat(e.poster_path),_((function(a){return[].concat((0,n.Z)(a),[{id:e.id,title:e.title,poster:e.poster_path,selected:!1,inCollection:t,loadingUpdate:!1}])})),F(!1)):"tv"===j?(null===e.poster_path||void 0===e.poster_path||""===e.poster_path?e.poster_path="https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/image-not-found-500-750.png?v=1720192338848":e.poster_path="https://image.tmdb.org/t/p/w500".concat(e.poster_path),_((function(a){return[].concat((0,n.Z)(a),[{id:e.id,title:e.name,poster:"https://image.tmdb.org/t/p/w500".concat(e.poster_path),selected:!1,inCollection:t,loadingUpdate:!1}])})),F(!1)):"game"===j?(null!==e.image.original_url&&void 0!==e.image.original_url&&""!==e.image.original_url||(e.image.original_url="https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/image-not-found-500-750.png?v=1720192338848"),_((function(a){return[].concat((0,n.Z)(a),[{id:e.guid,title:e.name,poster:e.image.original_url,selected:!1,inCollection:t,loadingUpdate:!1}])})),F(!1)):"board"===j&&(_((function(a){return[].concat((0,n.Z)(a),[{id:e.id,title:e.name,selected:!1,inCollection:t,loadingUpdate:!1}])})),F(!1))}))})).catch((function(e){console.log(e),F(!1)}))},ge=(0,o.useRef)(m().debounce(ue,2e3,{search:""})).current,fe=function(e,a){var n=he.current.find((function(t){return t.itemId===e}));if(a)pe((0,i.Z)((0,i.Z)({},me),{},{loadingUpdate:!0}));else{var c=Z.map((function(t){return t.id===e&&(t.loadingUpdate=!0),t}));_(c)}fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(N,"/").concat(n.mongoId),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(c){if(a){pe((0,i.Z)((0,i.Z)({},me),{},{collectionStatus:!1,loadingUpdate:!1}));var o=Z.map((function(t){return t.id===e&&(t.inCollection=!1),t}));_(o)}else{var s=Z.map((function(t){return t.id===e&&(t.inCollection=!1,t.loadingUpdate=!1),t}));_(s)}var l=he.current.filter((function(t){return t.itemId!==e}));he.current=l,T(he.current),(0,h.Am)("Item removed from ".concat(ae," collection"),{position:"bottom-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}),t.emit("remove-remote-item",n.mongoId,N)}))},be=function(e,a,n,c){if(c)pe((0,i.Z)((0,i.Z)({},me),{},{loadingUpdate:!0}));else{var o=Z.map((function(t){return t.id===e&&(t.loadingUpdate=!0),t}));_(o)}fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(N),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([{title:a,id:e,poster:n}])}).then((function(e){return e.json()})).then((function(o){if(he.current.push({itemId:e,mongoId:o.newItems[0]._id}),T(he.current),t.emit("add-remote-item",{title:a,itemId:e,poster:n,_id:o.newItems[0]._id,watched:!1},N),c){pe((0,i.Z)((0,i.Z)({},me),{},{collectionStatus:!0,loadingUpdate:!1}));var s=Z.map((function(t){return t.id===e&&(t.inCollection=!0),t}));_(s)}else{var l=Z.map((function(t){return t.id===e&&(t.inCollection=!0,t.loadingUpdate=!1),t}));_(l)}h.Am.success("Item saved to ".concat(ae," collection"),{position:"bottom-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})}))},ve=function(e,t){K(!0),J(!0),fetch("https://choice-champ-backend.glitch.me/media/getInfo/".concat(j,"/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){"board"===j?pe({id:e,title:a.media.details.title,poster:a.media.details.poster,maxPlayers:a.media.details.maxPlayers,minPlayers:a.media.details.minPlayers,playingTime:a.media.details.runtime,collectionStatus:t,loadingUpdate:!1}):"movie"===j||"tv"===j?pe({id:e,title:a.media.details.title,poster:a.media.details.poster,watchTime:a.media.details.runtime,rating:a.media.details.rating,providers:a.media.providers.stream,overview:a.media.details.overview}):"game"===j&&pe({id:e,title:a.media.details.name,poster:a.media.details.poster,runtime:a.media.details.runtime,platforms:a.media.providers.platforms,overview:a.media.details.overview}),K(!1)}))};return(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)(h.Ix,{}),B?(0,x.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button-active.png?v=1702137193420",alt:"Back symbol",className:"top-left clickable",style:{animation:"button-press .75s"}}):(0,x.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button.png?v=1702137134668",alt:"Back symbol",className:"top-left clickable",onClick:function(){z(!0),setTimeout((function(){z(!1),d("/collections/".concat(j,"/").concat(N))}),1e3)}}),(0,x.jsx)("h2",{className:"title color-".concat(j),children:ae}),(0,x.jsxs)("div",{className:"search-bar-container",children:[(0,x.jsx)("img",{src:v.Z,alt:"Search icon",className:"search-icon"}),(0,x.jsx)("input",{className:"search-bar",id:"search",placeholder:"Search",onChange:function(e){$(!0),F(!0),H(!1),ge(e.target.value)},ref:ne}),Y&&(0,x.jsx)(u.G,{icon:g.g82,size:"lg",className:"clear-search clickable",onClick:function(){ne.current.value="",ue(""),$(!1)}})]}),G&&(0,x.jsx)("p",{className:"no-match",children:"No matches found"}),P?(0,x.jsx)(r.Z,{color:se,type:"sync",className:"list-loading",size:15,speed:.5}):(0,x.jsx)("div",{className:"collection-content",children:Z.map((function(e){return(0,x.jsxs)("div",{className:"item-section ".concat(e.inCollection&&"board"!==j?j+"-outline":null),onClick:function(){e.loadingUpdate||"board"===j?"board"===j&&(ve(e.id,e.inCollection),J(!0)):e.inCollection?fe(e.id,!1):be(e.id,e.title,e.poster,!1)},children:["board"!==j?(0,x.jsx)("img",{src:e.poster,alt:"".concat(e.title," poster"),className:"item-img"}):(0,x.jsx)("div",{className:"board-img-search"}),"board"===j&&(0,x.jsx)("p",{className:"item-title",children:e.title}),"board"!==j&&(0,x.jsxs)(o.Fragment,{children:[e.loadingUpdate&&(0,x.jsx)(r.Z,{color:se,type:"beat",size:15,speed:.5,className:"loading-save"}),(0,x.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/info-1.png?v=1720119048801",alt:"More info",onClick:function(t){t.stopPropagation(),ve(e.id,e.inCollection),J(!0)},className:"more-info clickable"})]})]},e.id)}))}),(0,x.jsx)(p.Z,{open:A,onClose:function(){J(!1)},fullWidth:!0,maxWidth:"lg",children:(0,x.jsx)("div",{className:"dialog-content",children:q?(0,x.jsx)(r.Z,{color:se,type:"beat",className:"board-details-loading",size:20}):(0,x.jsxs)(o.Fragment,{children:[(0,x.jsx)("div",{id:"status-icon",children:"board"===j?me.loadingUpdate?(0,x.jsx)(r.Z,{color:se,type:"beat",size:15,speed:.5,className:"loading-save-modal"}):me.collectionStatus?(0,x.jsx)("img",{src:b,alt:"".concat(me.title," saved"),className:"item-action-board clickable",onClick:function(){fe(me.id,!0)}}):(0,x.jsx)("img",{id:me.id,src:f,alt:"".concat(me.title," unselected"),className:"item-action-board clickable",onClick:function(){be(me.id,me.title,me.poster,!0)}}):null}),(0,x.jsx)("img",{src:me.poster,alt:"".concat(me.title," poster"),className:"modal-poster",style:"board"!==j?{marginTop:"30px"}:null}),(0,x.jsx)("div",{className:"modal-header color-".concat(j),children:me.title}),(0,x.jsx)("div",{className:"modal-details",children:"board"===j?(0,x.jsxs)(o.Fragment,{children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label color-".concat(j),children:"Min Players:"})," ",me.minPlayers]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label color-".concat(j),children:"Max Players:"})," ",me.maxPlayers]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label color-".concat(j),children:"Play Time:"})," ",me.playingTime," min"]})]}):"game"===j?(0,x.jsxs)(o.Fragment,{children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label color-".concat(j),children:"Platforms:"})," ",me.platforms&&me.platforms.map((function(e,t){return(0,x.jsx)("span",{children:t===me.platforms.length-1?e.name:e.name+", "},e.name)}))]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label color-".concat(j),children:"Overview:"}),(0,x.jsx)("br",{})," ",me.overview]})]}):(0,x.jsxs)(o.Fragment,{children:["tv"===j?(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label color-".concat(j),children:"Seasons:"})," ",me.watchTime>1?me.watchTime+" seasons":me.watchTime+" season"]}):(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label color-".concat(j),children:"Watch Time:"})," ",me.watchTime," min"]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label color-".concat(j),children:"Rating:"})," ",me.rating]}),(0,x.jsxs)(o.Fragment,{children:[(0,x.jsx)("span",{className:"label color-".concat(j),children:"Stream:"}),me.providers?(0,x.jsx)("div",{className:"details-provider-list",children:me.providers.map((function(e){return(0,x.jsx)("img",{className:"provider-img",src:"https://image.tmdb.org/t/p/w500".concat(e.logo_path),alt:e.provider_name},e.provider_name)}))}):(0,x.jsx)("div",{className:"providers-not-available",children:"Not available to stream"})]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label color-".concat(j),children:"Overview:"}),(0,x.jsx)("br",{})," ",me.overview]})]})})]})})})]})}},9770:function(e,t,a){e.exports=a.p+"static/media/check.ba9d3e54bdec2de99f79.png"},4297:function(e,t,a){e.exports=a.p+"static/media/circle.004850191698b41d6112.png"}}]);
//# sourceMappingURL=961.9d4753b3.chunk.js.map