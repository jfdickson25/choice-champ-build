"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[699],{3217:function(e,t,c){c(2791);t.Z=c.p+"static/media/search.1769d7a66264f66c9ae9cfe98c03017d.svg"},5699:function(e,t,c){c.r(t),c.d(t,{default:function(){return g}});var a=c(3433),n=c(9439),i=c(2791),o=c(7689),l=c(3108),s=c(5382),r=c(9806),m=c(1632),d=c(8378),u=c(2852),h=c(3217),f=c(184),g=function(e){var t=e.socket,c=(0,i.useContext)(l.V),g=(0,o.s0)(),b=(0,o.UO)().type,p=(0,o.UO)().id,v=(0,o.UO)().name,k=window.location.search,x=new URLSearchParams(k),j=x.get("filter"),N=x.get("hash"),C=(0,i.useState)([]),w=(0,n.Z)(C,2),y=w[0],S=w[1],Z=(0,i.useState)(!1),_=(0,n.Z)(Z,2),z=_[0],T=_[1],I=(0,i.useState)(0),G=(0,n.Z)(I,2),D=G[0],E=G[1],M=(0,i.useState)(!0),O=(0,n.Z)(M,2),B=O[0],F=O[1],U=(0,i.useState)((0,o.UO)().name),L=(0,n.Z)(U,2),P=L[0],A=L[1],J=(0,i.useState)((function(){return"alphabetical"===j})),R=(0,n.Z)(J,2),V=R[0],H=R[1],q=(0,i.useState)((function(){return"watched"===j})),K=(0,n.Z)(q,2),Q=K[0],W=K[1],X=(0,i.useState)(!1),Y=(0,n.Z)(X,2),$=Y[0],ee=Y[1],te=(0,i.useState)(!1),ce=(0,n.Z)(te,2),ae=ce[0],ne=ce[1],ie=(0,i.useState)("#FCB016"),oe=(0,n.Z)(ie,2),le=oe[0],se=oe[1],re=(0,i.useRef)(y);(0,i.useEffect)((function(){c.showFooterHandler(!0),"movie"===b?se("#FCB016"):"tv"===b?se("#FF4D4D"):"game"===b?se("#2482C5"):"board"===b&&se("#45B859"),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(p),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){S(e.items),re.current=e.items,E(e.shareCode),"alphabetical"===j?H(!0):"watched"===j&&W(!0),setTimeout((function(){F(!1),N&&setTimeout((function(){document.getElementById(N).scrollIntoView({behavior:"smooth"})}),500)}),500),t.emit("join-room",p)}))}),[c,p,t]),(0,i.useEffect)((function(){return t.on("remove-item",(function(e){re.current=re.current.filter((function(t){return t._id!==e})),S(re.current)})),t.on("watched-item",(function(e){re.current=re.current.map((function(t){return t._id===e&&!1===t.watched?t.watched=!0:t._id===e&&!0===t.watched&&(t.watched=!1),t})),S(re.current)})),t.on("add-item",(function(e){re.current=[].concat((0,a.Z)(re.current),[e]),S(re.current)})),function(){t.off("remove-item"),t.off("watched-item"),t.off("add-item")}}),[t]);var me=function(e){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(p,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(c){re.current=re.current.filter((function(t){return t._id!==e})),S(re.current),t.emit("remove-remote-item",e,p)}))},de=function(e){g(V||Q?"/collections/".concat(b,"/").concat(P,"/").concat(p,"/details/").concat(e,"?filter=").concat(V?"alphabetical":"watched"):"/collections/".concat(b,"/").concat(P,"/").concat(p,"/details/").concat(e))},ue=function(e,c){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(p,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({watched:!c})}).then((function(c){S(y.map((function(t){return t._id===e&&!1===t.watched?(t.watched=!0,t.timestamp=Math.floor(Date.now()/1e3)):t._id===e&&!0===t.watched&&(t.watched=!1,t.timestamp=void 0),t}))),re.current=y,t.emit("watched-remote-item",e,p)}))},he=(0,i.useState)(""),fe=(0,n.Z)(he,2),ge=fe[0],be=fe[1],pe=(0,i.useMemo)((function(){return y.filter((function(e){return e.title.toLowerCase().includes(ge.toLowerCase())}))}),[y,ge]);return(0,f.jsx)(i.Fragment,{children:(0,f.jsxs)("div",{className:"content",children:[$?(0,f.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button-active.png?v=1702137193420",alt:"Back symbol",className:"top-left clickable",style:{animation:"button-press .75s"}}):(0,f.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button.png?v=1702137134668",alt:"Back symbol",className:"top-left clickable",onClick:function(){t.emit("leave-room",p),ee(!0),setTimeout((function(){ee(!1),g("/collections/".concat(b))}),1e3)}}),z?(0,f.jsx)("input",{className:"title",style:{gridColumn:"5/14",marginBottom:"10px"},value:P,onChange:function(e){return A(e.target.value)}}):(0,f.jsx)("h2",{className:"title color-".concat(b),children:P}),(0,f.jsx)("img",{src:z?u:d,className:"edit clickable",alt:"Edit icon",onClick:function(){z?""!==P?P!==v?fetch("https://choice-champ-backend.glitch.me/collections/name/".concat(p),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:P})}).then((function(e){T(!1)})):T(!1):alert("Collection name cannot be empty"):T(!0)},style:z?{animation:"button-press .75s"}:null}),(0,f.jsxs)("div",{className:"share-code",children:["share code: ",D]}),ae?(0,f.jsxs)("button",{className:"add-btn backgroundColor-".concat(b," backgroundColorPressed-").concat(b),style:{animation:"button-press .75s"},children:["Add ","movie"===b?"Movie":"game"===b||"board"===b?"Game":"Show"]}):(0,f.jsxs)("button",{className:"add-btn backgroundColor-".concat(b," clickable"),onClick:function(){ne(!0),setTimeout((function(){ne(!1),g("/collections/".concat(b,"/").concat(P,"/").concat(p,"/add"))}),1e3)},children:["Add ","movie"===b?"Movie":"game"===b||"board"===b?"Game":"Show"]}),(0,f.jsxs)("div",{className:"search-bar-container",children:[(0,f.jsx)("img",{src:h.Z,alt:"Search icon",className:"search-icon"}),(0,f.jsx)("input",{className:"search-bar",placeholder:"Search Collection",value:ge,onChange:function(e){return be(e.target.value)}}),""!==ge&&(0,f.jsx)(r.G,{icon:m.g82,size:"lg",className:"clear-search clickable",onClick:function(){return be("")}})]}),(0,f.jsx)(r.G,{icon:m.SZw,size:"xl",onClick:function(){H(!1),W(!1)},className:V||Q?"category-icon clickable":"active-categorize active-".concat(b," category-icon clickable"),id:"category-clock"}),(0,f.jsx)(r.G,{icon:m.bDz,size:"xl",onClick:function(){H(!0),W(!1)},className:V?"active-categorize active-".concat(b," category-icon clickable"):"category-icon clickable",id:"category-alph"}),(0,f.jsx)(r.G,{icon:"game"===b?m.l9D:"board"===b?m.rvC:m.Mdf,size:"xl",onClick:function(){W(!0),H(!1)},className:Q?"active-categorize active-".concat(b," category-icon clickable"):"category-icon clickable",id:"category-watch"}),(0,f.jsx)("span",{id:"chrono-label",className:V||Q?"category-label":"category-label category-label-active-".concat(b),children:"recent"}),(0,f.jsx)("span",{id:"alph-label",className:V?"category-label category-label-active-".concat(b):"category-label",children:"a-z"}),(0,f.jsx)("span",{id:"watched-label",className:Q?"category-label category-label-active-".concat(b):"category-label",children:"game"===b||"board"===b?"played":"watched"}),B?(0,f.jsx)(s.Z,{color:le,type:"beat",className:"list-loading",size:20}):(0,f.jsxs)("div",{className:"collection-content",children:[0===pe.length&&""===ge&&!Q&&(0,f.jsx)("p",{className:"no-items",children:"No items in this collection"}),0===pe.length&&""!==ge&&(0,f.jsx)("p",{className:"no-items",children:"No items match search"}),V&&!Q?(0,a.Z)(pe).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return e.watched?null:(0,f.jsxs)("div",{className:"item-section",id:e.itemId,onClick:z?null:function(){de(e.itemId)},children:[z?(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b||"game"===b?"item-img":"board-img",src:e.poster}):(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b||"game"===b?"item-img clickable":"board-img clickable",src:e.poster}),z?(0,f.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){me(e._id)}}):null,z?(0,f.jsx)(r.G,{icon:"game"===b?m.l9D:"board"===b?m.rvC:m.Mdf,size:"xl",className:"item-action-watched clickable",onClick:function(){ue(e._id)}}):null]},e.itemId)})):(0,a.Z)(pe).reverse().map((function(e){return e.watched||Q?null:(0,f.jsxs)("div",{className:"item-section",id:e.itemId,onClick:z?null:function(){de(e.itemId)},children:[z?(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b||"game"===b?"item-img":"board-img",src:e.poster}):(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b||"game"===b?"item-img clickable":"board-img clickable",src:e.poster}),z?(0,f.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){me(e._id)}}):null,z?(0,f.jsx)(r.G,{icon:"game"===b?m.l9D:"board"===b?m.rvC:m.Mdf,size:"xl",className:"item-action-watched clickable",onClick:function(){ue(e._id)}}):null]},e.itemId)})),Q&&(0===(0,a.Z)(pe).filter((function(e){return e.watched})).length&&""===ge?"game"===b||"board"===b?(0,f.jsx)("p",{className:"no-items",children:"No played items"}):(0,f.jsx)("p",{className:"no-items",children:"No watched items"}):(0,a.Z)(pe).filter((function(e){return e.watched})).sort((function(e,t){return e.timestamp-t.timestamp})).reverse().map((function(e){return(0,f.jsxs)("div",{className:"item-section",id:e.itemId,onClick:z?null:function(){de(e.itemId)},children:[(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b||"game"===b?"item-img":"board-img",src:e.poster}),z?(0,f.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){me(e._id)}}):null,z?(0,f.jsx)(r.G,{icon:"game"===b?m.l9D:"board"===b?m.rvC:m.Mdf,size:"xl",className:"item-action-watched color-".concat(b," clickable"),onClick:function(){ue(e._id,e.watched)}}):null]},e.itemId)})))]})]})})}},8378:function(e,t,c){e.exports=c.p+"static/media/edit.da72498c9a63add0149a.png"},2852:function(e,t,c){e.exports=c.p+"static/media/editing.e007df67d027caed3e0d.png"}}]);
//# sourceMappingURL=699.0de8ae52.chunk.js.map