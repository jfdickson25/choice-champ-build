"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[699],{5699:function(t,e,c){c.r(e),c.d(e,{default:function(){return f}});var n=c(3433),i=c(9439),a=c(2791),o=c(7689),l=c(3108),s=c(5382),m=c(9806),r=c(1632),d=c(8378),u=c(2852),h=c(184),f=function(t){var e=t.socket,c=(0,a.useContext)(l.V),f=(0,o.s0)(),p=(0,o.UO)().type,b=(0,o.UO)().id,g=(0,o.UO)().name,v=(0,a.useState)([]),k=(0,i.Z)(v,2),x=k[0],j=k[1],N=(0,a.useState)(!1),w=(0,i.Z)(N,2),C=w[0],y=w[1],Z=(0,a.useState)(0),S=(0,i.Z)(Z,2),_=S[0],T=S[1],I=(0,a.useState)(!0),z=(0,i.Z)(I,2),E=z[0],O=z[1],B=(0,a.useState)((0,o.UO)().name),G=(0,i.Z)(B,2),U=G[0],D=G[1],L=(0,a.useState)(!1),M=(0,i.Z)(L,2),A=M[0],F=M[1],H=(0,a.useState)(!1),J=(0,i.Z)(H,2),P=J[0],V=J[1],R=(0,a.useState)(!1),q=(0,i.Z)(R,2),K=q[0],Q=q[1],W=(0,a.useState)(!1),X=(0,i.Z)(W,2),Y=X[0],$=X[1],tt=(0,a.useRef)(x),et=(0,o.TH)().hash;(0,a.useEffect)((function(){c.showFooterHandler(!0),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(b),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){j(t.items),tt.current=t.items,T(t.shareCode),setTimeout((function(){O(!1),et&&setTimeout((function(){document.getElementById(et.substring(1)).scrollIntoView({behavior:"smooth"})}),500)}),500),e.emit("join-room",b)}))}),[c,b,e]),(0,a.useEffect)((function(){return e.on("remove-item",(function(t){tt.current=tt.current.filter((function(e){return e._id!==t})),j(tt.current)})),e.on("watched-item",(function(t){tt.current=tt.current.map((function(e){return e._id===t&&!1===e.watched?e.watched=!0:e._id===t&&!0===e.watched&&(e.watched=!1),e})),j(tt.current)})),e.on("add-item",(function(t){tt.current=[].concat((0,n.Z)(tt.current),[t]),j(tt.current)})),function(){e.off("remove-item"),e.off("watched-item"),e.off("add-item")}}),[e]);var ct=function(t){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(b,"/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(c){tt.current=tt.current.filter((function(e){return e._id!==t})),j(tt.current),e.emit("remove-remote-item",t,b)}))},nt=function(t){f("/collections/".concat(p,"/").concat(U,"/").concat(b,"/details/").concat(t))},it=function(t,c){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(b,"/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({watched:!c})}).then((function(c){j(x.map((function(e){return e._id===t&&!1===e.watched?(e.watched=!0,e.timestamp=Math.floor(Date.now()/1e3)):e._id===t&&!0===e.watched&&(e.watched=!1,e.timestamp=void 0),e}))),tt.current=x,e.emit("watched-remote-item",t,b)}))},at=(0,a.useState)(""),ot=(0,i.Z)(at,2),lt=ot[0],st=ot[1],mt=(0,a.useMemo)((function(){return x.filter((function(t){return t.title.toLowerCase().includes(lt.toLowerCase())}))}),[x,lt]);return(0,h.jsx)(a.Fragment,{children:(0,h.jsxs)("div",{className:"content",children:[K?(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button-active.png?v=1702137193420",alt:"Back symbol",className:"top-left clickable",style:{animation:"button-press .75s"}}):(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button.png?v=1702137134668",alt:"Back symbol",className:"top-left clickable",onClick:function(){e.emit("leave-room",b),Q(!0),setTimeout((function(){Q(!1),f("/collections/".concat(p))}),1e3)}}),C?(0,h.jsx)("input",{className:"title",style:{gridColumn:"5/14",marginBottom:"10px"},value:U,onChange:function(t){return D(t.target.value)}}):(0,h.jsx)("h2",{className:"title",children:U}),(0,h.jsx)("img",{src:C?u:d,className:"edit clickable",alt:"Edit icon",onClick:function(){C?""!==U?U!==g?fetch("https://choice-champ-backend.glitch.me/collections/name/".concat(b),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:U})}).then((function(t){y(!1)})):y(!1):alert("Collection name cannot be empty"):y(!0)},style:C?{animation:"button-press .75s"}:null}),(0,h.jsxs)("div",{className:"share-code",children:["share code: ",_]}),Y?(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/plus-button-active.png?v=1702137827635",alt:"Add icon",className:"add clickable",style:{animation:"button-press .75s"}}):(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/plus-button.png?v=1702138169050",alt:"Add icon",className:"add clickable",onClick:function(){$(!0),setTimeout((function(){$(!1),f("/collections/".concat(p,"/").concat(U,"/").concat(b,"/add"))}),1e3)}}),(0,h.jsx)("input",{className:"search-bar",placeholder:"Search Collection",value:lt,onChange:function(t){return st(t.target.value)}}),(0,h.jsx)(m.G,{icon:r.SZw,size:"xl",onClick:function(){F(!1),V(!1)},className:A||P?"clickable":"active-categorize clickable"}),(0,h.jsx)(m.G,{icon:r.bDz,size:"xl",onClick:function(){F(!0),V(!1)},className:A?"active-categorize clickable":"clickable"}),(0,h.jsx)(m.G,{icon:r.Mdf,size:"xl",onClick:function(){V(!0),F(!1)},className:P?"active-categorize clickable":"clickable"}),E?(0,h.jsx)(s.Z,{type:"beat",className:"list-loading",size:20}):(0,h.jsxs)("div",{className:"collection-content",children:[0===mt.length&&""===lt&&(0,h.jsx)("p",{className:"no-items",children:"No items in this collection"}),0===mt.length&&""!==lt&&(0,h.jsx)("p",{className:"no-items",children:"No items match search"}),A&&!P?(0,n.Z)(mt).sort((function(t,e){return t.title.localeCompare(e.title)})).map((function(t){return t.watched?null:(0,h.jsxs)("div",{className:"item-section",id:t.itemId,onClick:C?null:function(){nt(t.itemId)},children:[C?(0,h.jsx)("img",{alt:"".concat(t.title," poster"),className:"movie"===p||"tv"===p||"game"===p?"item-img":"board-img",src:t.poster}):(0,h.jsx)("img",{alt:"".concat(t.title," poster"),className:"movie"===p||"tv"===p||"game"===p?"item-img clickable":"board-img clickable",src:t.poster}),C?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(t.title," poster"),className:"item-action clickable",onClick:function(){ct(t._id)}}):null,C?(0,h.jsx)("img",{src:t.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(t.title," poster"),className:"item-action-watched clickable",onClick:function(){it(t._id)}}):null]},t.itemId)})):(0,n.Z)(mt).reverse().map((function(t){return t.watched||P?null:(0,h.jsxs)("div",{className:"item-section",id:t.itemId,onClick:C?null:function(){nt(t.itemId)},children:[C?(0,h.jsx)("img",{alt:"".concat(t.title," poster"),className:"movie"===p||"tv"===p||"game"===p?"item-img":"board-img",src:t.poster}):(0,h.jsx)("img",{alt:"".concat(t.title," poster"),className:"movie"===p||"tv"===p||"game"===p?"item-img clickable":"board-img clickable",src:t.poster}),C?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(t.title," poster"),className:"item-action clickable",onClick:function(){ct(t._id)}}):null,C?(0,h.jsx)("img",{src:t.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(t.title," poster"),className:"item-action-watched clickable",onClick:function(){it(t._id)}}):null]},t.itemId)})),P&&(0===(0,n.Z)(mt).filter((function(t){return t.watched})).length?"game"===p||"board"===p?(0,h.jsx)("p",{className:"no-items",children:"No played items"}):(0,h.jsx)("p",{className:"no-items",children:"No watched items"}):(0,n.Z)(mt).filter((function(t){return t.watched})).sort((function(t,e){return t.timestamp-e.timestamp})).reverse().map((function(t){return(0,h.jsxs)("div",{className:"item-section",id:t.itemId,onClick:C?null:function(){nt(t.itemId)},children:[(0,h.jsx)("img",{alt:"".concat(t.title," poster"),className:"movie"===p||"tv"===p||"game"===p?"item-img":"board-img",src:t.poster}),C?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(t.title," poster"),className:"item-action clickable",onClick:function(){ct(t._id)}}):null,C?(0,h.jsx)("img",{src:t.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(t.title," poster"),className:"item-action-watched clickable",onClick:function(){it(t._id,t.watched)}}):null]},t.itemId)})))]})]})})}},8378:function(t,e,c){t.exports=c.p+"static/media/edit.da72498c9a63add0149a.png"},2852:function(t,e,c){t.exports=c.p+"static/media/editing.e007df67d027caed3e0d.png"}}]);
//# sourceMappingURL=699.b124915f.chunk.js.map