"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[961],{3217:function(e,t,a){a(2791);t.Z=a.p+"static/media/search.1769d7a66264f66c9ae9cfe98c03017d.svg"},9474:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var i=a(1413),n=a(3433),s=a(9439),c=a(2791),o=a(7689),l=a(3108),r=a(5382),d=a(763),m=a.n(d),p=a(8214),h=a(9655),u=(a(5462),a(9806)),g=a(1632),f=a(4297),b=a(9770),v=a(3217),x=a(184),j=function(e){var t=e.socket,a=(0,c.useContext)(l.V),d=(0,o.s0)(),j=(0,o.UO)().type,N=(0,o.UO)().name,k=(0,o.UO)().id,C=(0,c.useState)([]),Z=(0,s.Z)(C,2),_=Z[0],y=Z[1],w=(0,c.useState)([]),S=(0,s.Z)(w,2),T=S[0],U=S[1],I=(0,c.useState)(!1),P=(0,s.Z)(I,2),O=P[0],E=P[1],F=(0,c.useState)(!1),z=(0,s.Z)(F,2),B=z[0],R=z[1],G=(0,c.useState)(!1),H=(0,s.Z)(G,2),M=H[0],W=H[1],A=(0,c.useState)(!1),D=(0,s.Z)(A,2),J=D[0],L=D[1],V=(0,c.useState)(!1),q=(0,s.Z)(V,2),K=q[0],Q=q[1],X=(0,c.useState)(!1),Y=(0,s.Z)(X,2),$=Y[0],ee=Y[1],te=(0,c.useRef)(""),ae=(0,c.useState)({}),ie=(0,s.Z)(ae,2),ne=ie[0],se=ie[1],ce=(0,c.useRef)(T);(0,c.useEffect)((function(){a.showFooterHandler(!0),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(k),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.items&&(ce.current=e.items.map((function(e){return{itemId:e.itemId,mongoId:e._id}})),U(ce.current))}))}),[a,j,k]);var oe=function(e){if(""===e||void 0===e||null===e)return y([]),W(!1),E(!1),void ee(!1);fetch("https://choice-champ-backend.glitch.me/media/".concat(j,"/").concat(e,"/1")).then((function(e){return e.json()})).then((function(e){if(0===e.media.results.length)return y([]),E(!1),void W(!0);y([]),e.media.results.forEach((function(e){var t=!1;ce.current.forEach((function(a){("game"!==j&&a.itemId===e.id||"game"===j&&a.itemId===e.guid)&&(t=!0)})),"movie"===j?(null===e.poster_path||void 0===e.poster_path||""===e.poster_path?e.poster_path="https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/image-not-found-500-750.png?v=1720192338848":e.poster_path="https://image.tmdb.org/t/p/w500".concat(e.poster_path),y((function(a){return[].concat((0,n.Z)(a),[{id:e.id,title:e.title,poster:e.poster_path,selected:!1,inCollection:t,loadingUpdate:!1}])})),E(!1)):"tv"===j?(null===e.poster_path||void 0===e.poster_path||""===e.poster_path?e.poster_path="https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/image-not-found-500-750.png?v=1720192338848":e.poster_path="https://image.tmdb.org/t/p/w500".concat(e.poster_path),y((function(a){return[].concat((0,n.Z)(a),[{id:e.id,title:e.name,poster:"https://image.tmdb.org/t/p/w500".concat(e.poster_path),selected:!1,inCollection:t,loadingUpdate:!1}])})),E(!1)):"game"===j?(null!==e.image.original_url&&void 0!==e.image.original_url&&""!==e.image.original_url||(e.image.original_url="https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/image-not-found-500-750.png?v=1720192338848"),y((function(a){return[].concat((0,n.Z)(a),[{id:e.guid,title:e.name,poster:e.image.original_url,selected:!1,inCollection:t,loadingUpdate:!1}])})),E(!1)):"board"===j&&(y((function(a){return[].concat((0,n.Z)(a),[{id:e.id,title:e.name,selected:!1,inCollection:t,loadingUpdate:!1}])})),E(!1))}))})).catch((function(e){console.log(e),E(!1)}))},le=(0,c.useRef)(m().debounce(oe,2e3,{search:""})).current,re=function(e,a){var n=ce.current.find((function(t){return t.itemId===e}));if(a)se((0,i.Z)((0,i.Z)({},ne),{},{loadingUpdate:!0}));else{var s=_.map((function(t){return t.id===e&&(t.loadingUpdate=!0),t}));y(s)}fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(k,"/").concat(n.mongoId),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(s){if(a){se((0,i.Z)((0,i.Z)({},ne),{},{collectionStatus:!1,loadingUpdate:!1}));var c=_.map((function(t){return t.id===e&&(t.inCollection=!1),t}));y(c)}else{var o=_.map((function(t){return t.id===e&&(t.inCollection=!1,t.loadingUpdate=!1),t}));y(o)}var l=ce.current.filter((function(t){return t.itemId!==e}));ce.current=l,U(ce.current),(0,h.Am)("Item removed from ".concat(N," collection"),{position:"bottom-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}),t.emit("remove-remote-item",n.mongoId,k)}))},de=function(e,a,n,s){if(s)se((0,i.Z)((0,i.Z)({},ne),{},{loadingUpdate:!0}));else{var c=_.map((function(t){return t.id===e&&(t.loadingUpdate=!0),t}));y(c)}fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(k),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([{title:a,id:e,poster:n}])}).then((function(e){return e.json()})).then((function(c){if(ce.current.push({itemId:e,mongoId:c.newItems[0]._id}),U(ce.current),t.emit("add-remote-item",{title:a,itemId:e,poster:n,_id:c.newItems[0]._id,watched:!1},k),s){se((0,i.Z)((0,i.Z)({},ne),{},{collectionStatus:!0,loadingUpdate:!1}));var o=_.map((function(t){return t.id===e&&(t.inCollection=!0),t}));y(o)}else{var l=_.map((function(t){return t.id===e&&(t.inCollection=!0,t.loadingUpdate=!1),t}));y(l)}h.Am.success("Item saved to ".concat(N," collection"),{position:"bottom-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})}))},me=function(e,t){Q(!0),L(!0),fetch("https://choice-champ-backend.glitch.me/media/getInfo/".concat(j,"/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){"board"===j?se({id:e,title:a.media.details.title,poster:a.media.details.poster,maxPlayers:a.media.details.maxPlayers,minPlayers:a.media.details.minPlayers,playingTime:a.media.details.runtime,collectionStatus:t,loadingUpdate:!1}):"movie"===j||"tv"===j?se({id:e,title:a.media.details.title,poster:a.media.details.poster,watchTime:a.media.details.runtime,rating:a.media.details.rating,providers:a.media.providers.stream,overview:a.media.details.overview}):"game"===j&&se({id:e,title:a.media.details.name,poster:a.media.details.poster,runtime:a.media.details.runtime,platforms:a.media.providers.platforms,overview:a.media.details.overview}),Q(!1)}))};return(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)(h.Ix,{}),B?(0,x.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button-active.png?v=1702137193420",alt:"Back symbol",className:"top-left clickable",style:{animation:"button-press .75s"}}):(0,x.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button.png?v=1702137134668",alt:"Back symbol",className:"top-left clickable",onClick:function(){R(!0),setTimeout((function(){R(!1),d("/collections/".concat(j,"/").concat(N,"/").concat(k))}),1e3)}}),(0,x.jsx)("h2",{className:"title color-".concat(j),children:N}),(0,x.jsxs)("div",{className:"search-bar-container",children:[(0,x.jsx)("img",{src:v.Z,alt:"Search icon",className:"search-icon"}),(0,x.jsx)("input",{className:"search-bar",id:"search",placeholder:"Search",onChange:function(e){ee(!0),E(!0),W(!1),le(e.target.value)},ref:te}),$&&(0,x.jsx)(u.G,{icon:g.g82,size:"lg",className:"clear-search clickable",onClick:function(){te.current.value="",oe(""),ee(!1)}})]}),M&&(0,x.jsx)("p",{className:"no-match",children:"No matches found"}),O?(0,x.jsx)(r.Z,{type:"sync",className:"list-loading",size:15,speed:.5}):(0,x.jsx)("div",{className:"collection-content",children:_.map((function(e){return(0,x.jsxs)("div",{className:"item-section",onClick:function(){e.loadingUpdate||"board"===j?"board"===j&&(me(e.id,e.inCollection),L(!0)):e.inCollection?re(e.id,!1):de(e.id,e.title,e.poster,!1)},children:["board"!==j?(0,x.jsx)("img",{src:e.poster,alt:"".concat(e.title," poster"),className:"item-img"}):(0,x.jsx)("div",{className:"board-img-search"}),"board"===j&&(0,x.jsx)("p",{className:"item-title",children:e.title}),"board"!==j&&(0,x.jsxs)(c.Fragment,{children:[e.loadingUpdate?(0,x.jsx)(r.Z,{type:"beat",size:15,speed:.5,className:"loading-save"}):e.inCollection?(0,x.jsx)("img",{src:b,alt:"".concat(e.title," saved"),className:"item-action clickable"}):(0,x.jsx)("img",{id:e.id,src:f,alt:"".concat(e.title," unselected"),className:"item-action clickable"}),(0,x.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/info-1.png?v=1720119048801",alt:"More info",onClick:function(t){t.stopPropagation(),me(e.id,e.inCollection),L(!0)},className:"more-info clickable"})]})]},e.id)}))}),(0,x.jsx)(p.Z,{open:J,onClose:function(){L(!1)},fullWidth:!0,maxWidth:"lg",children:(0,x.jsx)("div",{className:"dialog-content",children:K?(0,x.jsx)(r.Z,{type:"beat",className:"board-details-loading",size:20}):(0,x.jsxs)(c.Fragment,{children:[(0,x.jsx)("div",{id:"status-icon",children:"board"===j?ne.loadingUpdate?(0,x.jsx)(r.Z,{type:"beat",size:15,speed:.5,className:"loading-save-modal"}):ne.collectionStatus?(0,x.jsx)("img",{src:b,alt:"".concat(ne.title," saved"),className:"item-action-board clickable",onClick:function(){re(ne.id,!0)}}):(0,x.jsx)("img",{id:ne.id,src:f,alt:"".concat(ne.title," unselected"),className:"item-action-board clickable",onClick:function(){de(ne.id,ne.title,ne.poster,!0)}}):null}),(0,x.jsx)("img",{src:ne.poster,alt:"".concat(ne.title," poster"),className:"modal-poster",style:"board"!==j?{marginTop:"30px"}:null}),(0,x.jsx)("div",{className:"modal-header",children:ne.title}),(0,x.jsx)("div",{className:"modal-details",children:"board"===j?(0,x.jsxs)(c.Fragment,{children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label",children:"Min Players:"})," ",ne.minPlayers]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label",children:"Max Players:"})," ",ne.maxPlayers]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label",children:"Play Time:"})," ",ne.playingTime," min"]})]}):"game"===j?(0,x.jsxs)(c.Fragment,{children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label",children:"Platforms:"})," ",ne.platforms&&ne.platforms.map((function(e,t){return(0,x.jsx)("span",{children:t===ne.platforms.length-1?e.name:e.name+", "},e.name)}))]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label",children:"Overview:"}),(0,x.jsx)("br",{})," ",ne.overview]})]}):(0,x.jsxs)(c.Fragment,{children:["tv"===j?(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label",children:"Seasons:"})," ",ne.watchTime>1?ne.watchTime+" seasons":ne.watchTime+" season"]}):(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label",children:"Watch Time:"})," ",ne.watchTime," min"]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label",children:"Rating:"})," ",ne.rating]}),(0,x.jsxs)(c.Fragment,{children:[(0,x.jsx)("span",{className:"label",children:"Stream:"}),ne.providers?(0,x.jsx)("div",{className:"details-provider-list",children:ne.providers.map((function(e){return(0,x.jsx)("img",{className:"provider-img",src:"https://image.tmdb.org/t/p/w500".concat(e.logo_path),alt:e.provider_name},e.provider_name)}))}):(0,x.jsx)("div",{className:"providers-not-available",children:"Not available to stream"})]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{className:"label",children:"Overview:"}),(0,x.jsx)("br",{})," ",ne.overview]})]})})]})})})]})}},9770:function(e,t,a){e.exports=a.p+"static/media/check.ba9d3e54bdec2de99f79.png"},4297:function(e,t,a){e.exports=a.p+"static/media/circle.004850191698b41d6112.png"}}]);
//# sourceMappingURL=961.5471e28c.chunk.js.map