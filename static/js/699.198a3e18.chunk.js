"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[699],{5699:function(e,t,c){c.r(t),c.d(t,{default:function(){return f}});var n=c(3433),i=c(9439),a=c(2791),o=c(7689),l=c(3108),s=c(5382),m=c(9806),r=c(1632),d=c(8378),u=c(2852),h=c(184),f=function(e){var t=e.socket,c="https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",f="https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/gamepad.png?v=1702830617327",p="https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/chess-piece.png?v=1702830919549",g=(0,a.useContext)(l.V),b=(0,o.s0)(),v=(0,o.UO)().type,k=(0,o.UO)().id,x=(0,o.UO)().name,j=(0,a.useState)([]),N=(0,i.Z)(j,2),C=N[0],w=N[1],y=(0,a.useState)(!1),Z=(0,i.Z)(y,2),S=Z[0],_=Z[1],T=(0,a.useState)(0),I=(0,i.Z)(T,2),z=I[0],E=I[1],O=(0,a.useState)(!0),B=(0,i.Z)(O,2),D=B[0],G=B[1],U=(0,a.useState)((0,o.UO)().name),L=(0,i.Z)(U,2),M=L[0],A=L[1],F=(0,a.useState)(!1),H=(0,i.Z)(F,2),J=H[0],P=H[1],V=(0,a.useState)(!1),R=(0,i.Z)(V,2),q=R[0],K=R[1],Q=(0,a.useState)(!1),W=(0,i.Z)(Q,2),X=W[0],Y=W[1],$=(0,a.useState)(!1),ee=(0,i.Z)($,2),te=ee[0],ce=ee[1],ne=(0,a.useRef)(C),ie=(0,o.TH)().hash;(0,a.useEffect)((function(){g.showFooterHandler(!0),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(k),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){w(e.items),ne.current=e.items,E(e.shareCode),setTimeout((function(){G(!1),ie&&setTimeout((function(){document.getElementById(ie.substring(1)).scrollIntoView({behavior:"smooth"})}),500)}),500),t.emit("join-room",k)}))}),[g,k,t]),(0,a.useEffect)((function(){return t.on("remove-item",(function(e){ne.current=ne.current.filter((function(t){return t._id!==e})),w(ne.current)})),t.on("watched-item",(function(e){ne.current=ne.current.map((function(t){return t._id===e&&!1===t.watched?t.watched=!0:t._id===e&&!0===t.watched&&(t.watched=!1),t})),w(ne.current)})),t.on("add-item",(function(e){ne.current=[].concat((0,n.Z)(ne.current),[e]),w(ne.current)})),function(){t.off("remove-item"),t.off("watched-item"),t.off("add-item")}}),[t]);var ae=function(e){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(k,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(c){ne.current=ne.current.filter((function(t){return t._id!==e})),w(ne.current),t.emit("remove-remote-item",e,k)}))},oe=function(e){b("/collections/".concat(v,"/").concat(M,"/").concat(k,"/details/").concat(e))},le=function(e,c){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(k,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({watched:!c})}).then((function(c){w(C.map((function(t){return t._id===e&&!1===t.watched?(t.watched=!0,t.timestamp=Math.floor(Date.now()/1e3)):t._id===e&&!0===t.watched&&(t.watched=!1,t.timestamp=void 0),t}))),ne.current=C,t.emit("watched-remote-item",e,k)}))},se=(0,a.useState)(""),me=(0,i.Z)(se,2),re=me[0],de=me[1],ue=(0,a.useMemo)((function(){return C.filter((function(e){return e.title.toLowerCase().includes(re.toLowerCase())}))}),[C,re]);return(0,h.jsx)(a.Fragment,{children:(0,h.jsxs)("div",{className:"content",children:[X?(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button-active.png?v=1702137193420",alt:"Back symbol",className:"top-left clickable",style:{animation:"button-press .75s"}}):(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button.png?v=1702137134668",alt:"Back symbol",className:"top-left clickable",onClick:function(){t.emit("leave-room",k),Y(!0),setTimeout((function(){Y(!1),b("/collections/".concat(v))}),1e3)}}),S?(0,h.jsx)("input",{className:"title",style:{gridColumn:"5/14",marginBottom:"10px"},value:M,onChange:function(e){return A(e.target.value)}}):(0,h.jsx)("h2",{className:"title",children:M}),(0,h.jsx)("img",{src:S?u:d,className:"edit clickable",alt:"Edit icon",onClick:function(){S?""!==M?M!==x?fetch("https://choice-champ-backend.glitch.me/collections/name/".concat(k),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:M})}).then((function(e){_(!1)})):_(!1):alert("Collection name cannot be empty"):_(!0)},style:S?{animation:"button-press .75s"}:null}),(0,h.jsxs)("div",{className:"share-code",children:["share code: ",z]}),te?(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/plus-button-active.png?v=1702137827635",alt:"Add icon",className:"add clickable",style:{animation:"button-press .75s"}}):(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/plus-button.png?v=1702138169050",alt:"Add icon",className:"add clickable",onClick:function(){ce(!0),setTimeout((function(){ce(!1),b("/collections/".concat(v,"/").concat(M,"/").concat(k,"/add"))}),1e3)}}),(0,h.jsx)("input",{className:"search-bar",placeholder:"Search Collection",value:re,onChange:function(e){return de(e.target.value)}}),(0,h.jsx)(m.G,{icon:r.SZw,size:"xl",onClick:function(){P(!1),K(!1)},className:J||q?"clickable":"active-categorize clickable"}),(0,h.jsx)(m.G,{icon:r.bDz,size:"xl",onClick:function(){P(!0),K(!1)},className:J?"active-categorize clickable":"clickable"}),(0,h.jsx)(m.G,{icon:"game"===v?r.l9D:"board"===v?r.rvC:r.Mdf,size:"xl",onClick:function(){K(!0),P(!1)},className:q?"active-categorize clickable":"clickable"}),D?(0,h.jsx)(s.Z,{type:"beat",className:"list-loading",size:20}):(0,h.jsxs)("div",{className:"collection-content",children:[0===ue.length&&""===re&&(0,h.jsx)("p",{className:"no-items",children:"No items in this collection"}),0===ue.length&&""!==re&&(0,h.jsx)("p",{className:"no-items",children:"No items match search"}),J&&!q?(0,n.Z)(ue).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return e.watched?null:(0,h.jsxs)("div",{className:"item-section",id:e.itemId,onClick:S?null:function(){oe(e.itemId)},children:[S?(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===v||"tv"===v||"game"===v?"item-img":"board-img",src:e.poster}):(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===v||"tv"===v||"game"===v?"item-img clickable":"board-img clickable",src:e.poster}),S?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){ae(e._id)}}):null,S?(0,h.jsx)("img",{src:"movie"===v||"tv"===v?c:"game"===v?f:p,alt:"".concat(e.title," poster"),className:"item-action-watched clickable",onClick:function(){le(e._id)}}):null]},e.itemId)})):(0,n.Z)(ue).reverse().map((function(e){return e.watched||q?null:(0,h.jsxs)("div",{className:"item-section",id:e.itemId,onClick:S?null:function(){oe(e.itemId)},children:[S?(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===v||"tv"===v||"game"===v?"item-img":"board-img",src:e.poster}):(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===v||"tv"===v||"game"===v?"item-img clickable":"board-img clickable",src:e.poster}),S?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){ae(e._id)}}):null,S?(0,h.jsx)("img",{src:"movie"===v||"tv"===v?c:"game"===v?f:p,alt:"".concat(e.title," poster"),className:"item-action-watched clickable",onClick:function(){le(e._id)}}):null]},e.itemId)})),q&&(0===(0,n.Z)(ue).filter((function(e){return e.watched})).length?"game"===v||"board"===v?(0,h.jsx)("p",{className:"no-items",children:"No played items"}):(0,h.jsx)("p",{className:"no-items",children:"No watched items"}):(0,n.Z)(ue).filter((function(e){return e.watched})).sort((function(e,t){return e.timestamp-t.timestamp})).reverse().map((function(e){return(0,h.jsxs)("div",{className:"item-section",id:e.itemId,onClick:S?null:function(){oe(e.itemId)},children:[(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===v||"tv"===v||"game"===v?"item-img":"board-img",src:e.poster}),S?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){ae(e._id)}}):null,S?(0,h.jsx)("img",{src:"movie"===v||"tv"===v?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"game"===v?"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/gamepad-played.png?v=1702830632013":"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/chess-piece-played.png?v=1702830917014",alt:"".concat(e.title," poster"),className:"item-action-watched clickable",onClick:function(){le(e._id,e.watched)}}):null]},e.itemId)})))]})]})})}},8378:function(e,t,c){e.exports=c.p+"static/media/edit.da72498c9a63add0149a.png"},2852:function(e,t,c){e.exports=c.p+"static/media/editing.e007df67d027caed3e0d.png"}}]);
//# sourceMappingURL=699.198a3e18.chunk.js.map