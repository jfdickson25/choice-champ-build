"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[699],{3217:function(e,t,c){c(2791);t.Z=c.p+"static/media/search.1769d7a66264f66c9ae9cfe98c03017d.svg"},5699:function(e,t,c){c.r(t),c.d(t,{default:function(){return p}});var n=c(3433),a=c(9439),o=c(2791),i=c(7689),l=c(3108),s=c(5382),r=c(9806),m=c(1632),d=c(8378),u=c(2852),h=c(3217),f=c(8387),b=c(184),p=function(e){var t=e.socket,c=(0,o.useContext)(l.V),p=(0,i.s0)(),g=(0,i.UO)().type,j=(0,i.UO)().id,v=window.location.search,y=new URLSearchParams(v),k=y.get("filter"),x=y.get("hash"),C=(0,o.useState)([]),N=(0,a.Z)(C,2),w=N[0],Z=N[1],S=(0,o.useState)(!1),O=(0,a.Z)(S,2),z=O[0],_=O[1],D=(0,o.useState)(0),P=(0,a.Z)(D,2),T=P[0],I=P[1],E=(0,o.useState)(!0),G=(0,a.Z)(E,2),M=G[0],B=G[1],F=(0,o.useState)(""),L=(0,a.Z)(F,2),U=L[0],A=L[1],J=(0,o.useState)(""),R=(0,a.Z)(J,2),V=R[0],H=R[1],q=(0,o.useState)((function(){return"alphabetical"===k})),K=(0,a.Z)(q,2),Q=K[0],W=K[1],X=(0,o.useState)((function(){return"watched"===k})),Y=(0,a.Z)(X,2),$=Y[0],ee=Y[1],te=(0,o.useState)(!1),ce=(0,a.Z)(te,2),ne=ce[0],ae=ce[1],oe=(0,o.useState)(!1),ie=(0,a.Z)(oe,2),le=ie[0],se=ie[1],re=(0,o.useState)("#FCB016"),me=(0,a.Z)(re,2),de=me[0],ue=me[1],he=(0,o.useRef)(w);(0,o.useEffect)((function(){c.showFooterHandler(!0),"movie"===g?ue("#FCB016"):"tv"===g?ue("#FF4D4D"):"game"===g?ue("#2482C5"):"board"===g&&ue("#45B859"),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(j),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){Z(e.items),he.current=e.items,I(e.shareCode),A(e.name),H(e.name),"alphabetical"===k?W(!0):"watched"===k&&ee(!0),setTimeout((function(){B(!1),x&&setTimeout((function(){document.getElementById(x).scrollIntoView({behavior:"smooth"})}),500)}),500),t.emit("join-room",j)}))}),[c,j,t]),(0,o.useEffect)((function(){return t.on("remove-item",(function(e){he.current=he.current.filter((function(t){return t._id!==e})),Z(he.current)})),t.on("watched-item",(function(e){he.current=he.current.map((function(t){return t._id===e&&!1===t.watched?t.watched=!0:t._id===e&&!0===t.watched&&(t.watched=!1),t})),Z(he.current)})),t.on("add-item",(function(e){he.current=[].concat((0,n.Z)(he.current),[e]),Z(he.current)})),function(){t.off("remove-item"),t.off("watched-item"),t.off("add-item")}}),[t]);var fe=function(e){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(j,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(c){he.current=he.current.filter((function(t){return t._id!==e})),Z(he.current),t.emit("remove-remote-item",e,j)}))},be=function(e){p(Q||$?"/collections/".concat(g,"/").concat(j,"/details/").concat(e,"?filter=").concat(Q?"alphabetical":"watched"):"/collections/".concat(g,"/").concat(j,"/details/").concat(e))},pe=function(e,c){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(j,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({watched:!c})}).then((function(c){Z(w.map((function(t){return t._id===e&&!1===t.watched?(t.watched=!0,t.timestamp=Math.floor(Date.now()/1e3)):t._id===e&&!0===t.watched&&(t.watched=!1,t.timestamp=void 0),t}))),he.current=w,t.emit("watched-remote-item",e,j)}))},ge=(0,o.useState)(""),je=(0,a.Z)(ge,2),ve=je[0],ye=je[1],ke=(0,o.useMemo)((function(){return w.filter((function(e){return e.title.toLowerCase().includes(ve.toLowerCase())}))}),[w,ve]);return(0,b.jsx)(o.Fragment,{children:(0,b.jsxs)("div",{className:"content",children:[ne?(0,b.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button-active.png?v=1702137193420",alt:"Back symbol",className:"top-left clickable",style:{animation:"button-press .75s"}}):(0,b.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button.png?v=1702137134668",alt:"Back symbol",className:"top-left clickable",onClick:function(){t.emit("leave-room",j),ae(!0),setTimeout((function(){ae(!1),p("/collections/".concat(g))}),1e3)}}),z?(0,b.jsx)("input",{className:"title",style:{gridColumn:"5/14",marginBottom:"10px"},value:V,onChange:function(e){return H(e.target.value)}}):(0,b.jsx)("h2",{className:"title color-".concat(g),children:V}),(0,b.jsx)("img",{src:z?u:d,className:"edit clickable",alt:"Edit icon",onClick:function(){z?""!==V?V!==U?fetch("https://choice-champ-backend.glitch.me/collections/name/".concat(j),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:V})}).then((function(e){_(!1),A(V)})):_(!1):alert("Collection name cannot be empty"):_(!0)},style:z?{animation:"button-press .75s"}:null}),(0,b.jsxs)("div",{className:"share-code",children:["share code: ",T]}),le?(0,b.jsxs)("button",{className:"add-btn backgroundColor-".concat(g," backgroundColorPressed-").concat(g),style:{animation:"button-press .75s"},children:["Add ","movie"===g?"Movie":"game"===g||"board"===g?"Game":"Show"]}):(0,b.jsxs)("button",{className:"add-btn backgroundColor-".concat(g," clickable"),onClick:function(){se(!0),setTimeout((function(){se(!1),p("/collections/".concat(g,"/").concat(j,"/add"))}),1e3)},children:["Add ","movie"===g?"Movie":"game"===g||"board"===g?"Game":"Show"]}),(0,b.jsxs)("div",{className:"search-bar-container",children:[(0,b.jsx)("img",{src:h.Z,alt:"Search icon",className:"search-icon"}),(0,b.jsx)("input",{className:"search-bar",placeholder:"Search Collection",value:ve,onChange:function(e){return ye(e.target.value)}}),""!==ve&&(0,b.jsx)(r.G,{icon:m.g82,size:"lg",className:"clear-search clickable",onClick:function(){return ye("")}})]}),(0,b.jsx)(r.G,{icon:m.SZw,size:"xl",onClick:function(){W(!1),ee(!1)},className:Q||$?"category-icon clickable":"active-categorize active-".concat(g," category-icon clickable"),id:"category-clock"}),(0,b.jsx)(r.G,{icon:m.bDz,size:"xl",onClick:function(){W(!0),ee(!1)},className:Q?"active-categorize active-".concat(g," category-icon clickable"):"category-icon clickable",id:"category-alph"}),(0,b.jsx)(r.G,{icon:"game"===g?m.l9D:"board"===g?m.rvC:m.Mdf,size:"xl",onClick:function(){ee(!0),W(!1)},className:$?"active-categorize active-".concat(g," category-icon clickable"):"category-icon clickable",id:"category-watch"}),(0,b.jsx)("span",{id:"chrono-label",className:Q||$?"category-label":"category-label category-label-active-".concat(g),children:"recent"}),(0,b.jsx)("span",{id:"alph-label",className:Q?"category-label category-label-active-".concat(g):"category-label",children:"a-z"}),(0,b.jsx)("span",{id:"watched-label",className:$?"category-label category-label-active-".concat(g):"category-label",children:"game"===g||"board"===g?"played":"watched"}),M?(0,b.jsx)(s.Z,{color:de,type:"beat",className:"list-loading",size:20}):(0,b.jsxs)("div",{className:"collection-content",children:[0===ke.length&&""===ve&&!$&&(0,b.jsx)("p",{className:"no-items",children:"No items in this collection"}),0===ke.length&&""!==ve&&(0,b.jsx)("p",{className:"no-items",children:"No items match search"}),Q&&!$?(0,n.Z)(ke).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return e.watched?null:(0,b.jsxs)("div",{className:"item-section",id:e.itemId,onClick:z?null:function(){be(e.itemId)},children:[z?(0,b.jsx)(f.Z,{styleSettings:"",alt:"".concat(e.title," poster"),collectionColor:de,classNames:"item-img",src:e.poster}):(0,b.jsx)(f.Z,{styleSettings:"",alt:"".concat(e.title," poster"),collectionColor:de,classNames:"item-img clickable",src:e.poster}),z?(0,b.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){fe(e._id)}}):null,z?(0,b.jsx)(r.G,{icon:"game"===g?m.l9D:"board"===g?m.rvC:m.Mdf,size:"xl",className:"item-action-watched clickable",onClick:function(){pe(e._id)}}):null]},e.itemId)})):(0,n.Z)(ke).reverse().map((function(e){return e.watched||$?null:(0,b.jsxs)("div",{className:"item-section",id:e.itemId,onClick:z?null:function(){be(e.itemId)},children:[z?(0,b.jsx)(f.Z,{styleSettings:"",alt:"".concat(e.title," poster"),collectionColor:de,classNames:"item-img",src:e.poster}):(0,b.jsx)(f.Z,{styleSettings:"",alt:"".concat(e.title," poster"),collectionColor:de,classNames:"item-img clickable",src:e.poster}),z?(0,b.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){fe(e._id)}}):null,z?(0,b.jsx)(r.G,{icon:"game"===g?m.l9D:"board"===g?m.rvC:m.Mdf,size:"xl",className:"item-action-watched clickable",onClick:function(){pe(e._id)}}):null]},e.itemId)})),$&&(0===(0,n.Z)(ke).filter((function(e){return e.watched})).length&&""===ve?"game"===g||"board"===g?(0,b.jsx)("p",{className:"no-items",children:"No played items"}):(0,b.jsx)("p",{className:"no-items",children:"No watched items"}):(0,n.Z)(ke).filter((function(e){return e.watched})).sort((function(e,t){return e.timestamp-t.timestamp})).reverse().map((function(e){return(0,b.jsxs)("div",{className:"item-section",id:e.itemId,onClick:z?null:function(){be(e.itemId)},children:[z?(0,b.jsx)(f.Z,{styleSettings:"",alt:"".concat(e.title," poster"),collectionColor:de,classNames:"item-img",src:e.poster}):(0,b.jsx)(f.Z,{styleSettings:"",alt:"".concat(e.title," poster"),collectionColor:de,classNames:"item-img clickable",src:e.poster}),z?(0,b.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){fe(e._id)}}):null,z?(0,b.jsx)(r.G,{icon:"game"===g?m.l9D:"board"===g?m.rvC:m.Mdf,size:"xl",className:"item-action-watched color-".concat(g," clickable"),onClick:function(){pe(e._id,e.watched)}}):null]},e.itemId)})))]})]})})}},8387:function(e,t,c){var n=c(1413),a=c(9439),o=c(2791),i=c(5382),l=c(184);t.Z=function(e){var t=e.src,c=e.alt,s=e.classNames,r=e.collectionColor,m=e.styleSettings,d=(0,o.useState)(!1),u=(0,a.Z)(d,2),h=u[0],f=u[1];return(0,l.jsxs)("div",{children:[!h&&(0,l.jsx)(i.Z,{color:r,type:"beat",className:"item-loading",size:20}),(0,l.jsx)("img",{src:t,className:s,alt:c,style:h?{}:(0,n.Z)({display:"none"},m),onLoad:function(){return f(!0)}})]})}},8378:function(e,t,c){e.exports=c.p+"static/media/edit.da72498c9a63add0149a.png"},2852:function(e,t,c){e.exports=c.p+"static/media/editing.e007df67d027caed3e0d.png"},4942:function(e,t,c){c.d(t,{Z:function(){return a}});var n=c(9142);function a(e,t,c){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}},1413:function(e,t,c){c.d(t,{Z:function(){return o}});var n=c(4942);function a(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function o(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?a(Object(c),!0).forEach((function(t){(0,n.Z)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):a(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}}}]);
//# sourceMappingURL=699.a8ed6caf.chunk.js.map