"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[474],{5541:function(t,e,n){n(2791);e.Z=n.p+"static/media/back.130646437979786be8370a1fdf68655a.svg"},9474:function(t,e,n){n.r(e),n.d(e,{default:function(){return f}});var c=n(3433),i=n(9439),o=n(2791),a=n(7689),s=n(3108),r=n(5382),l=n(763),d=n.n(l),m=n(5541),u=n(2940),h=(n(8496),n(9770)),p=n(184),f=function(t){var e=t.socket,n=(0,o.useContext)(s.V),l=(0,a.s0)(),f=(0,a.UO)().type,g=(0,a.UO)().name,b=(0,a.UO)().id,v=(0,o.useState)([]),k=(0,i.Z)(v,2),j=k[0],C=k[1],x=(0,o.useState)([]),I=(0,i.Z)(x,2),N=I[0],y=I[1],Z=(0,o.useState)(!1),w=(0,i.Z)(Z,2),_=w[0],E=w[1],S=(0,o.useState)(!1),T=(0,i.Z)(S,2),O=T[0],U=T[1],R=(0,o.useRef)(N);(0,o.useEffect)((function(){n.showFooterHandler(!1),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(b),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){t.items&&(R.current=t.items.map((function(t){return{itemId:t.itemId,mongoId:t._id}})),y(R.current))}))}),[n,f,b]);var z=(0,o.useRef)(d().debounce((function(t){if(""===t||void 0===t||null===t)return C([]),void E(!1);fetch("https://choice-champ-backend.glitch.me/media/".concat(f,"/").concat(t,"/1")).then((function(t){return t.json()})).then((function(t){C([]),t.media.results.forEach((function(t){var e=!1;R.current.forEach((function(n){n.itemId===t.id&&(e=!0)})),"movie"===f?(C((function(n){return[].concat((0,c.Z)(n),[{id:t.id,title:t.title,poster:"https://image.tmdb.org/t/p/w500".concat(t.poster_path),selected:!1,inCollection:e}])})),E(!1)):"tv"===f?(C((function(n){return[].concat((0,c.Z)(n),[{id:t.id,title:t.name,poster:"https://image.tmdb.org/t/p/w500".concat(t.poster_path),selected:!1,inCollection:e}])})),E(!1)):"game"===f?(C((function(n){return[].concat((0,c.Z)(n),[{id:t.id,title:t.name,poster:t.background_image,selected:!1,inCollection:e}])})),E(!1)):"board"===f&&(C((function(n){return[].concat((0,c.Z)(n),[{id:t.id,title:t.name,selected:!1,inCollection:e}])})),E(!1))}))}))}),2e3,{search:""})).current,B=function(t,n,c){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(b),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([{title:n,id:t,poster:c}])}).then((function(t){return t.json()})).then((function(i){R.current.push({itemId:t,mongoId:i.newItems[0]._id}),y(R.current),e.emit("add-remote-item",{title:n,itemId:t,poster:c,_id:i.newItems[0]._id,watched:!1},b);var o=j.map((function(e){return e.id===t&&(e.inCollection=!0),e}));C(o)}))};return(0,p.jsxs)("div",{className:"content",children:[(0,p.jsx)("img",{src:m.Z,alt:"Back symbol",className:"top-left clickable",onClick:function(){U(!0),setTimeout((function(){U(!1),l("/collections/".concat(f,"/").concat(g,"/").concat(b))}),1e3)},style:O?{animation:"button-press .75s"}:null}),(0,p.jsx)("h2",{className:"title",children:g}),(0,p.jsx)("input",{className:"search-bar",placeholder:"Search",onChange:function(t){E(!0),z(t.target.value)}}),_?(0,p.jsx)(r.Z,{type:"sync",className:"list-loading",size:15,speed:.5}):(0,p.jsx)("div",{className:"game"===f?"collection-content-game":"collection-content",children:j.map((function(t){return(0,p.jsxs)("div",{className:"item-section",onClick:function(){t.inCollection?function(t){var n=R.current.find((function(e){return e.itemId===t}));fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(b,"/").concat(n.mongoId),{method:"DELETE",headers:{"Content-Type":"application/json"}});var c=j.map((function(e){return e.id===t&&(e.inCollection=!1),e}));C(c);var i=R.current.filter((function(e){return e.itemId!==t}));R.current=i,y(R.current),e.emit("remove-remote-item",n.mongoId,b)}(t.id):"board"===f?B(t.id,t.title):B(t.id,t.title,t.poster)},children:["board"!==f?(0,p.jsx)("img",{src:t.poster,alt:"".concat(t.title," poster"),className:"movie"===f||"tv"===f?"item-img":"game-img"}):(0,p.jsx)("div",{className:"board-img-search"}),"movie"!==f&&"tv"!==f&&(0,p.jsx)("p",{className:"board"===f?"item-title":void 0,children:t.title}),t.inCollection?(0,p.jsx)("img",{src:h,alt:"".concat(t.title," saved"),style:"game"===f?{width:"15%"}:null,className:"game"===f?"item-action-game clickable":"item-action clickable"}):(0,p.jsx)("img",{id:t.id,src:u,alt:"".concat(t.title," unselected"),className:"game"===f?"item-action-game clickable":"item-action clickable"})]},t.id)}))})]})}},9770:function(t,e,n){t.exports=n.p+"static/media/check.ba9d3e54bdec2de99f79.png"},2940:function(t,e,n){t.exports=n.p+"static/media/circle.004850191698b41d6112.png"},8496:function(t,e,n){t.exports=n.p+"static/media/filled-circle.b3ddbfdcf723d9daf179.png"}}]);
//# sourceMappingURL=474.2468b22d.chunk.js.map