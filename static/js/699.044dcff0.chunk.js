"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[699],{5541:function(e,t,c){c(2791);t.Z=c.p+"static/media/back.130646437979786be8370a1fdf68655a.svg"},5699:function(e,t,c){c.r(t),c.d(t,{default:function(){return p}});var i=c(3433),a=c(9439),n=c(2791),l=c(7689),o=c(3108),s=c(5382),m=c(9806),d=c(1632),r=c(5541),u=c(4297),h=c(8378),g=c(2852),f=c(184),p=function(e){var t=e.socket,c=(0,n.useContext)(o.V),p=(0,l.s0)(),b=(0,l.UO)().type,k=(0,l.UO)().id,v=(0,l.UO)().name,w=(0,n.useState)([]),x=(0,a.Z)(w,2),j=x[0],N=x[1],C=(0,n.useState)(!1),Z=(0,a.Z)(C,2),y=Z[0],_=Z[1],S=(0,n.useState)(0),I=(0,a.Z)(S,2),T=I[0],E=I[1],O=(0,n.useState)(!0),z=(0,a.Z)(O,2),U=z[0],B=z[1],D=(0,n.useState)((0,l.UO)().name),G=(0,a.Z)(D,2),L=G[0],F=G[1],H=(0,n.useState)(!1),J=(0,a.Z)(H,2),M=J[0],P=J[1],V=(0,n.useState)(!1),A=(0,a.Z)(V,2),R=A[0],q=A[1],K=(0,n.useState)(!1),Q=(0,a.Z)(K,2),W=Q[0],X=Q[1],Y=(0,n.useRef)(j),$=(0,l.TH)().hash;(0,n.useEffect)((function(){c.showFooterHandler(!0),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(k),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){N(e.items),Y.current=e.items,E(e.shareCode),setTimeout((function(){B(!1),$&&setTimeout((function(){document.getElementById($.substring(1)).scrollIntoView({behavior:"smooth"})}),500)}),500),t.emit("join-room",k)}))}),[c,k,t]),(0,n.useEffect)((function(){return t.on("remove-item",(function(e){Y.current=Y.current.filter((function(t){return t._id!==e})),N(Y.current)})),t.on("watched-item",(function(e){Y.current=Y.current.map((function(t){return t._id===e&&!1===t.watched?t.watched=!0:t._id===e&&!0===t.watched&&(t.watched=!1),t})),N(Y.current)})),t.on("add-items",(function(e){var t=[].concat((0,i.Z)(Y.current),(0,i.Z)(e));Y.current=t,N(Y.current)})),function(){t.off("remove-item"),t.off("watched-item"),t.off("add-items")}}),[t]);var ee=function(e){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(k,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(c){N(j.filter((function(t){return t._id!==e}))),Y.current=j,t.emit("remove-remote-item",e,k)}))},te=function(e){p("/collections/".concat(b,"/").concat(L,"/").concat(k,"/details/").concat(e))},ce=function(e,c){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(k,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({watched:!c})}).then((function(c){N(j.map((function(t){return t._id===e&&!1===t.watched?(t.watched=!0,t.timestamp=Math.floor(Date.now()/1e3)):t._id===e&&!0===t.watched&&(t.watched=!1,t.timestamp=void 0),t}))),Y.current=j,t.emit("watched-remote-item",e,k)}))},ie=(0,n.useState)(""),ae=(0,a.Z)(ie,2),ne=ae[0],le=ae[1],oe=(0,n.useMemo)((function(){return j.filter((function(e){return e.title.toLowerCase().includes(ne.toLowerCase())}))}),[j,ne]);return(0,f.jsx)(n.Fragment,{children:(0,f.jsxs)("div",{className:"content",children:[(0,f.jsx)("img",{src:r.Z,alt:"Back symbol",className:"top-left clickable",onClick:function(){t.emit("leave-room",k),q(!0),setTimeout((function(){q(!1),p("/collections/".concat(b))}),1e3)},style:R?{animation:"button-press .75s"}:null}),y?(0,f.jsx)("input",{className:"title",style:{gridColumn:"5/14",marginBottom:"10px"},value:L,onChange:function(e){return F(e.target.value)}}):(0,f.jsx)("h2",{className:"title",children:L}),(0,f.jsx)("img",{src:y?g:h,className:"edit clickable",alt:"Edit icon",onClick:function(){y?""!==L?L!==v?fetch("https://choice-champ-backend.glitch.me/collections/name/".concat(k),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:L})}).then((function(e){_(!1)})):_(!1):alert("Collection name cannot be empty"):_(!0)}}),(0,f.jsxs)("div",{className:"share-code",children:["share code: ",T]}),(0,f.jsx)("img",{src:u,alt:"Add icon",className:"add clickable",onClick:function(){X(!0),setTimeout((function(){X(!1),p("/collections/".concat(b,"/").concat(L,"/").concat(k,"/add"))}),1e3)},style:W?{animation:"button-press .75s"}:null}),(0,f.jsx)("input",{className:"search-bar",placeholder:"Search Collection",value:ne,onChange:function(e){return le(e.target.value)}}),(0,f.jsx)(m.G,{icon:d.bDz,size:"xl",onClick:function(){P(!0)},className:M?"active-categorize clickable":"clickable"}),(0,f.jsx)(m.G,{icon:d.SZw,size:"xl",onClick:function(){P(!1)},className:M?"clickable":"active-categorize clickable"}),U?(0,f.jsx)(s.Z,{type:"beat",className:"list-loading",size:20}):(0,f.jsxs)("div",{className:"game"===b?"collection-content-game":"collection-content",children:[0===oe.length&&""===ne&&(0,f.jsx)("p",{className:"no-items",children:"No items in this collection"}),0===oe.length&&""!==ne&&(0,f.jsx)("p",{className:"no-items",children:"No items match search"}),M?(0,i.Z)(oe).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return e.watched?null:(0,f.jsxs)("div",{className:"item-section",id:e.itemId,onClick:y?null:function(){te(e.itemId)},children:[y?(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b?"item-img":"game"===b?"game-img":"board-img",src:e.poster}):(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b?"item-img clickable":"game"===b?"game-img clickable":"board-img clickable",src:e.poster}),("game"===b||"board"===b)&&(0,f.jsx)("p",{children:e.title}),y?(0,f.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"game"===b?"item-action-game clickable":"item-action clickable",onClick:function(){ee(e._id)}}):null,y?(0,f.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"game"===b?"item-action-watched-game clickable":"item-action-watched clickable",onClick:function(){ce(e._id)}}):null]},e.itemId)})):(0,i.Z)(oe).reverse().map((function(e){return e.watched?null:(0,f.jsxs)("div",{className:"item-section",id:e.itemId,onClick:y?null:function(){te(e.itemId)},children:[y?(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b?"item-img":"game"===b?"game-img":"board-img",src:e.poster}):(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b?"item-img clickable":"game"===b?"game-img clickable":"board-img clickable",src:e.poster}),("game"===b||"board"===b)&&(0,f.jsx)("p",{children:e.title}),y?(0,f.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"game"===b?"item-action-game clickable":"item-action clickable",onClick:function(){ee(e._id)}}):null,y?(0,f.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"game"===b?"item-action-watched-game clickable":"item-action-watched clickable",onClick:function(){ce(e._id)}}):null]},e.itemId)})),oe.filter((function(e){return e.watched})).length>0?(0,f.jsx)("div",{className:"game"===b?"divider-game":"divider-other"}):null,M?(0,i.Z)(oe).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return e.watched?(0,f.jsxs)("div",{className:"item-section",id:e.itemId,onClick:y?null:function(){te(e.itemId)},children:[(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b?"item-img":"game"===b?"game-img":"board-img",src:e.poster}),("game"===b||"board"===b)&&(0,f.jsx)("p",{children:e.title}),y?(0,f.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"game"===b?"item-action-game clickable":"item-action clickable",onClick:function(){ee(e._id)}}):null,y?(0,f.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"game"===b?"item-action-watched-game clickable":"item-action-watched clickable",onClick:function(){ce(e._id,e.watched)}}):null]},e.itemId):null})):(0,i.Z)(oe).filter((function(e){return e.watched})).sort((function(e,t){return e.timestamp-t.timestamp})).reverse().map((function(e){return(0,f.jsxs)("div",{className:"item-section",id:e.itemId,onClick:y?null:function(){te(e.itemId)},children:[(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b?"item-img":"game"===b?"game-img":"board-img",src:e.poster}),("game"===b||"board"===b)&&(0,f.jsx)("p",{children:e.title}),y?(0,f.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"game"===b?"item-action-game clickable":"item-action clickable",onClick:function(){ee(e._id)}}):null,y?(0,f.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"game"===b?"item-action-watched-game clickable":"item-action-watched clickable",onClick:function(){ce(e._id,e.watched)}}):null]},e.itemId)}))]})]})})}},4297:function(e,t,c){e.exports=c.p+"static/media/add.28df205f935a3975dcff.png"},8378:function(e,t,c){e.exports=c.p+"static/media/edit.da72498c9a63add0149a.png"},2852:function(e,t,c){e.exports=c.p+"static/media/editing.e007df67d027caed3e0d.png"}}]);
//# sourceMappingURL=699.044dcff0.chunk.js.map