"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[961],{3217:function(e,t,a){a(2791);t.Z=a.p+"static/media/search.1769d7a66264f66c9ae9cfe98c03017d.svg"},9474:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var i=a(1413),n=a(3433),o=a(9439),c=a(2791),s=a(7689),l=a(3108),r=a(5382),d=a(763),m=a.n(d),p=a(8214),h=a(9655),u=(a(5462),a(9806)),g=a(1632),f=a(4297),b=a(9770),v=a(3217),x=a(8387),j=a(184),N=function(e){var t=e.socket,a=(0,c.useContext)(l.V),d=(0,s.s0)(),N=(0,s.UO)().type,C=(0,s.UO)().id,Z=(0,c.useState)([]),k=(0,o.Z)(Z,2),y=k[0],_=k[1],w=(0,c.useState)([]),S=(0,o.Z)(w,2),T=S[0],I=S[1],U=(0,c.useState)(!1),P=(0,o.Z)(U,2),F=P[0],O=P[1],B=(0,c.useState)(!1),E=(0,o.Z)(B,2),z=E[0],R=E[1],D=(0,c.useState)(!1),G=(0,o.Z)(D,2),H=G[0],M=G[1],W=(0,c.useState)(!1),A=(0,o.Z)(W,2),L=A[0],J=A[1],V=(0,c.useState)(!1),q=(0,o.Z)(V,2),K=q[0],Q=q[1],X=(0,c.useState)(!1),Y=(0,o.Z)(X,2),$=Y[0],ee=Y[1],te=(0,c.useState)(""),ae=(0,o.Z)(te,2),ie=ae[0],ne=ae[1],oe=(0,c.useRef)(""),ce=(0,c.useState)("#FCB016"),se=(0,o.Z)(ce,2),le=se[0],re=se[1],de=(0,c.useState)({}),me=(0,o.Z)(de,2),pe=me[0],he=me[1],ue=(0,c.useRef)(T);(0,c.useEffect)((function(){a.showFooterHandler(!0),"movie"===N?re("#FCB016"):"tv"===N?re("#FF4D4D"):"game"===N?re("#2482C5"):"board"===N&&re("#45B859"),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(C),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){ne(e.name),e.items&&(ue.current=e.items.map((function(e){return{itemId:e.itemId,mongoId:e._id}})),I(ue.current))}))}),[a,N,C]);var ge=function(e){if(""===e||void 0===e||null===e)return _([]),M(!1),O(!1),void ee(!1);fetch("https://choice-champ-backend.glitch.me/media/".concat(N,"/").concat(e,"/1")).then((function(e){return e.json()})).then((function(e){if(0===e.media.results.length)return _([]),O(!1),void M(!0);_([]),e.media.results.forEach((function(e){var t=!1;ue.current.forEach((function(a){("game"!==N&&a.itemId===e.id||"game"===N&&a.itemId===e.guid)&&(t=!0)})),"movie"===N?(null===e.poster_path||void 0===e.poster_path||""===e.poster_path?e.poster_path="https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/image-not-found-500-750.png?v=1720192338848":e.poster_path="https://image.tmdb.org/t/p/w500".concat(e.poster_path),_((function(a){return[].concat((0,n.Z)(a),[{id:e.id,title:e.title,poster:e.poster_path,selected:!1,inCollection:t,loadingUpdate:!1}])})),O(!1)):"tv"===N?(null===e.poster_path||void 0===e.poster_path||""===e.poster_path?e.poster_path="https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/image-not-found-500-750.png?v=1720192338848":e.poster_path="https://image.tmdb.org/t/p/w500".concat(e.poster_path),_((function(a){return[].concat((0,n.Z)(a),[{id:e.id,title:e.name,poster:"https://image.tmdb.org/t/p/w500".concat(e.poster_path),selected:!1,inCollection:t,loadingUpdate:!1}])})),O(!1)):"game"===N?(null!==e.image.original_url&&void 0!==e.image.original_url&&""!==e.image.original_url||(e.image.original_url="https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/image-not-found-500-750.png?v=1720192338848"),_((function(a){return[].concat((0,n.Z)(a),[{id:e.guid,title:e.name,poster:e.image.original_url,selected:!1,inCollection:t,loadingUpdate:!1}])})),O(!1)):"board"===N&&(_((function(a){return[].concat((0,n.Z)(a),[{id:e.id,title:e.name,selected:!1,inCollection:t,loadingUpdate:!1}])})),O(!1))}))})).catch((function(e){console.log(e),O(!1)}))},fe=(0,c.useRef)(m().debounce(ge,2e3,{search:""})).current,be=function(e,a){var n=ue.current.find((function(t){return t.itemId===e}));if(a)he((0,i.Z)((0,i.Z)({},pe),{},{loadingUpdate:!0}));else{var o=y.map((function(t){return t.id===e&&(t.loadingUpdate=!0),t}));_(o)}fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(C,"/").concat(n.mongoId),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(o){if(a){he((0,i.Z)((0,i.Z)({},pe),{},{collectionStatus:!1,loadingUpdate:!1}));var c=y.map((function(t){return t.id===e&&(t.inCollection=!1),t}));_(c)}else{var s=y.map((function(t){return t.id===e&&(t.inCollection=!1,t.loadingUpdate=!1),t}));_(s)}var l=ue.current.filter((function(t){return t.itemId!==e}));ue.current=l,I(ue.current),(0,h.Am)("Item removed from ".concat(ie," collection"),{position:"bottom-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}),t.emit("remove-remote-item",n.mongoId,C)}))},ve=function(e,a,n,o){if(o)he((0,i.Z)((0,i.Z)({},pe),{},{loadingUpdate:!0}));else{var c=y.map((function(t){return t.id===e&&(t.loadingUpdate=!0),t}));_(c)}fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(C),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([{title:a,id:e,poster:n}])}).then((function(e){return e.json()})).then((function(c){if(ue.current.push({itemId:e,mongoId:c.newItems[0]._id}),I(ue.current),t.emit("add-remote-item",{title:a,itemId:e,poster:n,_id:c.newItems[0]._id,watched:!1},C),o){he((0,i.Z)((0,i.Z)({},pe),{},{collectionStatus:!0,loadingUpdate:!1}));var s=y.map((function(t){return t.id===e&&(t.inCollection=!0),t}));_(s)}else{var l=y.map((function(t){return t.id===e&&(t.inCollection=!0,t.loadingUpdate=!1),t}));_(l)}h.Am.success("Item saved to ".concat(ie," collection"),{position:"bottom-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})}))},xe=function(e,t){Q(!0),J(!0),fetch("https://choice-champ-backend.glitch.me/media/getInfo/".concat(N,"/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){"board"===N?he({id:e,title:a.media.details.title,poster:a.media.details.poster,maxPlayers:a.media.details.maxPlayers,minPlayers:a.media.details.minPlayers,playingTime:a.media.details.runtime,collectionStatus:t,loadingUpdate:!1}):"movie"===N||"tv"===N?he({id:e,title:a.media.details.title,poster:a.media.details.poster,watchTime:a.media.details.runtime,rating:a.media.details.rating,providers:a.media.providers.stream,overview:a.media.details.overview}):"game"===N&&he({id:e,title:a.media.details.name,poster:a.media.details.poster,runtime:a.media.details.runtime,platforms:a.media.providers.platforms,overview:a.media.details.overview}),Q(!1)}))};return(0,j.jsxs)("div",{className:"content",children:[(0,j.jsx)(h.Ix,{}),z?(0,j.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button-active.png?v=1702137193420",alt:"Back symbol",className:"top-left clickable",style:{animation:"button-press .75s"}}):(0,j.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button.png?v=1702137134668",alt:"Back symbol",className:"top-left clickable",onClick:function(){R(!0),setTimeout((function(){R(!1),d("/collections/".concat(N,"/").concat(C))}),1e3)}}),(0,j.jsx)("h2",{className:"title color-".concat(N),children:ie}),(0,j.jsxs)("div",{className:"search-bar-container",children:[(0,j.jsx)("img",{src:v.Z,alt:"Search icon",className:"search-icon"}),(0,j.jsx)("input",{className:"search-bar",id:"search",placeholder:"Search",onChange:function(e){ee(!0),O(!0),M(!1),fe(e.target.value)},ref:oe}),$&&(0,j.jsx)(u.G,{icon:g.g82,size:"lg",className:"clear-search clickable",onClick:function(){oe.current.value="",ge(""),ee(!1)}})]}),H&&(0,j.jsx)("p",{className:"no-match",children:"No matches found"}),F?(0,j.jsx)(r.Z,{color:le,type:"sync",className:"list-loading",size:15,speed:.5}):(0,j.jsx)("div",{className:"collection-content",children:y.map((function(e){return(0,j.jsxs)("div",{className:"item-section ".concat(e.inCollection&&"board"!==N?N+"-outline":null),onClick:function(){e.loadingUpdate||"board"===N?"board"===N&&(xe(e.id,e.inCollection),J(!0)):e.inCollection?be(e.id,!1):ve(e.id,e.title,e.poster,!1)},children:["board"!==N?(0,j.jsx)(x.Z,{voted:null,finished:null,alt:"".concat(e.title," poster"),collectionColor:le,classNames:"item-img clickable",src:e.poster}):(0,j.jsx)("div",{className:"board-img-search"}),"board"===N&&(0,j.jsx)("p",{className:"item-title",children:e.title}),"board"!==N&&(0,j.jsxs)(c.Fragment,{children:[e.loadingUpdate&&(0,j.jsx)(r.Z,{color:le,type:"beat",size:15,speed:.5,className:"loading-save"}),(0,j.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/info-1.png?v=1720119048801",alt:"More info",onClick:function(t){t.stopPropagation(),xe(e.id,e.inCollection),J(!0)},className:"more-info clickable"})]})]},e.id)}))}),(0,j.jsx)(p.Z,{open:L,onClose:function(){J(!1)},fullWidth:!0,maxWidth:"lg",children:(0,j.jsx)("div",{className:"dialog-content",children:K?(0,j.jsx)(r.Z,{color:le,type:"beat",className:"board-details-loading",size:20}):(0,j.jsxs)(c.Fragment,{children:[(0,j.jsx)("div",{id:"status-icon",children:"board"===N?pe.loadingUpdate?(0,j.jsx)(r.Z,{color:le,type:"beat",size:15,speed:.5,className:"loading-save-modal"}):pe.collectionStatus?(0,j.jsx)("img",{src:b,alt:"".concat(pe.title," saved"),className:"item-action-board clickable",onClick:function(){be(pe.id,!0)}}):(0,j.jsx)("img",{id:pe.id,src:f,alt:"".concat(pe.title," unselected"),className:"item-action-board clickable",onClick:function(){ve(pe.id,pe.title,pe.poster,!0)}}):null}),(0,j.jsx)("img",{src:pe.poster,alt:"".concat(pe.title," poster"),className:"modal-poster",style:"board"!==N?{marginTop:"30px"}:null}),(0,j.jsx)("div",{className:"modal-header color-".concat(N),children:pe.title}),(0,j.jsx)("div",{className:"modal-details",children:"board"===N?(0,j.jsxs)(c.Fragment,{children:[(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"label color-".concat(N),children:"Min Players:"})," ",pe.minPlayers]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"label color-".concat(N),children:"Max Players:"})," ",pe.maxPlayers]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"label color-".concat(N),children:"Play Time:"})," ",pe.playingTime," min"]})]}):"game"===N?(0,j.jsxs)(c.Fragment,{children:[(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"label color-".concat(N),children:"Platforms:"})," ",pe.platforms&&pe.platforms.map((function(e,t){return(0,j.jsx)("span",{children:t===pe.platforms.length-1?e.name:e.name+", "},e.name)}))]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"label color-".concat(N),children:"Overview:"}),(0,j.jsx)("br",{})," ",pe.overview]})]}):(0,j.jsxs)(c.Fragment,{children:["tv"===N?(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"label color-".concat(N),children:"Seasons:"})," ",pe.watchTime>1?pe.watchTime+" seasons":pe.watchTime+" season"]}):(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"label color-".concat(N),children:"Watch Time:"})," ",pe.watchTime," min"]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"label color-".concat(N),children:"Rating:"})," ",pe.rating]}),(0,j.jsxs)(c.Fragment,{children:[(0,j.jsx)("span",{className:"label color-".concat(N),children:"Stream:"}),pe.providers?(0,j.jsx)("div",{className:"details-provider-list",children:pe.providers.map((function(e){return(0,j.jsx)("img",{className:"provider-img",src:"https://image.tmdb.org/t/p/w500".concat(e.logo_path),alt:e.provider_name},e.provider_name)}))}):(0,j.jsx)("div",{className:"providers-not-available",children:"Not available to stream"})]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"label color-".concat(N),children:"Overview:"}),(0,j.jsx)("br",{})," ",pe.overview]})]})})]})})})]})}},8387:function(e,t,a){var i=a(9439),n=a(2791),o=a(5382),c=a(184);t.Z=function(e){var t=e.src,a=e.alt,s=e.classNames,l=e.collectionColor,r=e.voted,d=e.finished,m=(0,n.useState)(!1),p=(0,i.Z)(m,2),h=p[0],u=p[1];return(0,c.jsxs)(n.Fragment,{children:[!h&&(0,c.jsx)(o.Z,{color:l,type:"beat",className:"item-loading",size:20}),(0,c.jsx)("img",{src:t,className:s,alt:a,style:h?r&&!d?{border:"5px solid #FCB016"}:null:{display:"none"},onLoad:function(){return u(!0)}})]})}},9770:function(e,t,a){e.exports=a.p+"static/media/check.ba9d3e54bdec2de99f79.png"},4297:function(e,t,a){e.exports=a.p+"static/media/circle.004850191698b41d6112.png"}}]);
//# sourceMappingURL=961.47448fd9.chunk.js.map