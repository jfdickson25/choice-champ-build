"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[699],{3217:function(e,t,c){c(2791);t.Z=c.p+"static/media/search.1769d7a66264f66c9ae9cfe98c03017d.svg"},5699:function(e,t,c){c.r(t),c.d(t,{default:function(){return g}});var a=c(3433),n=c(9439),i=c(2791),o=c(7689),l=c(3108),s=c(5382),r=c(9806),m=c(1632),d=c(8378),u=c(2852),h=c(3217),f=c(184),g=function(e){var t=e.socket,c=(0,i.useContext)(l.V),g=(0,o.s0)(),b=(0,o.UO)().type,p=(0,o.UO)().id,v=window.location.search,k=new URLSearchParams(v),x=k.get("filter"),j=k.get("hash"),N=(0,i.useState)([]),C=(0,n.Z)(N,2),w=C[0],y=C[1],S=(0,i.useState)(!1),Z=(0,n.Z)(S,2),_=Z[0],z=Z[1],T=(0,i.useState)(0),I=(0,n.Z)(T,2),G=I[0],D=I[1],E=(0,i.useState)(!0),M=(0,n.Z)(E,2),B=M[0],F=M[1],O=(0,i.useState)(""),L=(0,n.Z)(O,2),P=L[0],U=L[1],A=(0,i.useState)(""),J=(0,n.Z)(A,2),R=J[0],V=J[1],H=(0,i.useState)((function(){return"alphabetical"===x})),q=(0,n.Z)(H,2),K=q[0],Q=q[1],W=(0,i.useState)((function(){return"watched"===x})),X=(0,n.Z)(W,2),Y=X[0],$=X[1],ee=(0,i.useState)(!1),te=(0,n.Z)(ee,2),ce=te[0],ae=te[1],ne=(0,i.useState)(!1),ie=(0,n.Z)(ne,2),oe=ie[0],le=ie[1],se=(0,i.useState)("#FCB016"),re=(0,n.Z)(se,2),me=re[0],de=re[1],ue=(0,i.useRef)(w);(0,i.useEffect)((function(){c.showFooterHandler(!0),"movie"===b?de("#FCB016"):"tv"===b?de("#FF4D4D"):"game"===b?de("#2482C5"):"board"===b&&de("#45B859"),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(p),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){y(e.items),ue.current=e.items,D(e.shareCode),U(e.name),V(e.name),"alphabetical"===x?Q(!0):"watched"===x&&$(!0),setTimeout((function(){F(!1),j&&setTimeout((function(){document.getElementById(j).scrollIntoView({behavior:"smooth"})}),500)}),500),t.emit("join-room",p)}))}),[c,p,t]),(0,i.useEffect)((function(){return t.on("remove-item",(function(e){ue.current=ue.current.filter((function(t){return t._id!==e})),y(ue.current)})),t.on("watched-item",(function(e){ue.current=ue.current.map((function(t){return t._id===e&&!1===t.watched?t.watched=!0:t._id===e&&!0===t.watched&&(t.watched=!1),t})),y(ue.current)})),t.on("add-item",(function(e){ue.current=[].concat((0,a.Z)(ue.current),[e]),y(ue.current)})),function(){t.off("remove-item"),t.off("watched-item"),t.off("add-item")}}),[t]);var he=function(e){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(p,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(c){ue.current=ue.current.filter((function(t){return t._id!==e})),y(ue.current),t.emit("remove-remote-item",e,p)}))},fe=function(e){g(K||Y?"/collections/".concat(b,"/").concat(p,"/details/").concat(e,"?filter=").concat(K?"alphabetical":"watched"):"/collections/".concat(b,"/").concat(p,"/details/").concat(e))},ge=function(e,c){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(p,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({watched:!c})}).then((function(c){y(w.map((function(t){return t._id===e&&!1===t.watched?(t.watched=!0,t.timestamp=Math.floor(Date.now()/1e3)):t._id===e&&!0===t.watched&&(t.watched=!1,t.timestamp=void 0),t}))),ue.current=w,t.emit("watched-remote-item",e,p)}))},be=(0,i.useState)(""),pe=(0,n.Z)(be,2),ve=pe[0],ke=pe[1],xe=(0,i.useMemo)((function(){return w.filter((function(e){return e.title.toLowerCase().includes(ve.toLowerCase())}))}),[w,ve]);return(0,f.jsx)(i.Fragment,{children:(0,f.jsxs)("div",{className:"content",children:[ce?(0,f.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button-active.png?v=1702137193420",alt:"Back symbol",className:"top-left clickable",style:{animation:"button-press .75s"}}):(0,f.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button.png?v=1702137134668",alt:"Back symbol",className:"top-left clickable",onClick:function(){t.emit("leave-room",p),ae(!0),setTimeout((function(){ae(!1),g("/collections/".concat(b))}),1e3)}}),_?(0,f.jsx)("input",{className:"title",style:{gridColumn:"5/14",marginBottom:"10px"},value:R,onChange:function(e){return V(e.target.value)}}):(0,f.jsx)("h2",{className:"title color-".concat(b),children:R}),(0,f.jsx)("img",{src:_?u:d,className:"edit clickable",alt:"Edit icon",onClick:function(){_?""!==R?R!==P?fetch("https://choice-champ-backend.glitch.me/collections/name/".concat(p),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:R})}).then((function(e){z(!1),U(R)})):z(!1):alert("Collection name cannot be empty"):z(!0)},style:_?{animation:"button-press .75s"}:null}),(0,f.jsxs)("div",{className:"share-code",children:["share code: ",G]}),oe?(0,f.jsxs)("button",{className:"add-btn backgroundColor-".concat(b," backgroundColorPressed-").concat(b),style:{animation:"button-press .75s"},children:["Add ","movie"===b?"Movie":"game"===b||"board"===b?"Game":"Show"]}):(0,f.jsxs)("button",{className:"add-btn backgroundColor-".concat(b," clickable"),onClick:function(){le(!0),setTimeout((function(){le(!1),g("/collections/".concat(b,"/").concat(p,"/add"))}),1e3)},children:["Add ","movie"===b?"Movie":"game"===b||"board"===b?"Game":"Show"]}),(0,f.jsxs)("div",{className:"search-bar-container",children:[(0,f.jsx)("img",{src:h.Z,alt:"Search icon",className:"search-icon"}),(0,f.jsx)("input",{className:"search-bar",placeholder:"Search Collection",value:ve,onChange:function(e){return ke(e.target.value)}}),""!==ve&&(0,f.jsx)(r.G,{icon:m.g82,size:"lg",className:"clear-search clickable",onClick:function(){return ke("")}})]}),(0,f.jsx)(r.G,{icon:m.SZw,size:"xl",onClick:function(){Q(!1),$(!1)},className:K||Y?"category-icon clickable":"active-categorize active-".concat(b," category-icon clickable"),id:"category-clock"}),(0,f.jsx)(r.G,{icon:m.bDz,size:"xl",onClick:function(){Q(!0),$(!1)},className:K?"active-categorize active-".concat(b," category-icon clickable"):"category-icon clickable",id:"category-alph"}),(0,f.jsx)(r.G,{icon:"game"===b?m.l9D:"board"===b?m.rvC:m.Mdf,size:"xl",onClick:function(){$(!0),Q(!1)},className:Y?"active-categorize active-".concat(b," category-icon clickable"):"category-icon clickable",id:"category-watch"}),(0,f.jsx)("span",{id:"chrono-label",className:K||Y?"category-label":"category-label category-label-active-".concat(b),children:"recent"}),(0,f.jsx)("span",{id:"alph-label",className:K?"category-label category-label-active-".concat(b):"category-label",children:"a-z"}),(0,f.jsx)("span",{id:"watched-label",className:Y?"category-label category-label-active-".concat(b):"category-label",children:"game"===b||"board"===b?"played":"watched"}),B?(0,f.jsx)(s.Z,{color:me,type:"beat",className:"list-loading",size:20}):(0,f.jsxs)("div",{className:"collection-content",children:[0===xe.length&&""===ve&&!Y&&(0,f.jsx)("p",{className:"no-items",children:"No items in this collection"}),0===xe.length&&""!==ve&&(0,f.jsx)("p",{className:"no-items",children:"No items match search"}),K&&!Y?(0,a.Z)(xe).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return e.watched?null:(0,f.jsxs)("div",{className:"item-section",id:e.itemId,onClick:_?null:function(){fe(e.itemId)},children:[_?(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b||"game"===b?"item-img":"board-img",src:e.poster}):(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b||"game"===b?"item-img clickable":"board-img clickable",src:e.poster}),_?(0,f.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){he(e._id)}}):null,_?(0,f.jsx)(r.G,{icon:"game"===b?m.l9D:"board"===b?m.rvC:m.Mdf,size:"xl",className:"item-action-watched clickable",onClick:function(){ge(e._id)}}):null]},e.itemId)})):(0,a.Z)(xe).reverse().map((function(e){return e.watched||Y?null:(0,f.jsxs)("div",{className:"item-section",id:e.itemId,onClick:_?null:function(){fe(e.itemId)},children:[_?(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b||"game"===b?"item-img":"board-img",src:e.poster}):(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b||"game"===b?"item-img clickable":"board-img clickable",src:e.poster}),_?(0,f.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){he(e._id)}}):null,_?(0,f.jsx)(r.G,{icon:"game"===b?m.l9D:"board"===b?m.rvC:m.Mdf,size:"xl",className:"item-action-watched clickable",onClick:function(){ge(e._id)}}):null]},e.itemId)})),Y&&(0===(0,a.Z)(xe).filter((function(e){return e.watched})).length&&""===ve?"game"===b||"board"===b?(0,f.jsx)("p",{className:"no-items",children:"No played items"}):(0,f.jsx)("p",{className:"no-items",children:"No watched items"}):(0,a.Z)(xe).filter((function(e){return e.watched})).sort((function(e,t){return e.timestamp-t.timestamp})).reverse().map((function(e){return(0,f.jsxs)("div",{className:"item-section",id:e.itemId,onClick:_?null:function(){fe(e.itemId)},children:[(0,f.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===b||"tv"===b||"game"===b?"item-img":"board-img",src:e.poster}),_?(0,f.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){he(e._id)}}):null,_?(0,f.jsx)(r.G,{icon:"game"===b?m.l9D:"board"===b?m.rvC:m.Mdf,size:"xl",className:"item-action-watched color-".concat(b," clickable"),onClick:function(){ge(e._id,e.watched)}}):null]},e.itemId)})))]})]})})}},8378:function(e,t,c){e.exports=c.p+"static/media/edit.da72498c9a63add0149a.png"},2852:function(e,t,c){e.exports=c.p+"static/media/editing.e007df67d027caed3e0d.png"}}]);
//# sourceMappingURL=699.69c7096e.chunk.js.map