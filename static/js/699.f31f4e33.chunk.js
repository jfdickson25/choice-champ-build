"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[699],{5541:function(e,t,c){c(2791);t.Z=c.p+"static/media/back.130646437979786be8370a1fdf68655a.svg"},5699:function(e,t,c){c.r(t),c.d(t,{default:function(){return p}});var n=c(3433),i=c(9439),a=c(2791),o=c(7689),s=c(3108),l=c(5382),m=c(9806),d=c(1632),r=c(5541),u=c(4297),h=c(8378),f=c(2852),g=c(184),p=function(e){var t=e.socket,c=(0,a.useContext)(s.V),p=(0,o.s0)(),b=(0,o.UO)().type,v=(0,o.UO)().id,x=(0,o.UO)().name,j=(0,a.useState)([]),w=(0,i.Z)(j,2),N=w[0],k=w[1],C=(0,a.useState)(!1),Z=(0,i.Z)(C,2),_=Z[0],y=Z[1],S=(0,a.useState)(0),T=(0,i.Z)(S,2),z=T[0],I=T[1],O=(0,a.useState)(!0),E=(0,i.Z)(O,2),U=E[0],G=E[1],L=(0,a.useState)((0,o.UO)().name),B=(0,i.Z)(L,2),D=B[0],F=B[1],J=(0,a.useState)(!1),P=(0,i.Z)(J,2),A=P[0],H=P[1],M=(0,a.useState)(!1),R=(0,i.Z)(M,2),V=R[0],q=R[1],K=(0,a.useState)(!1),Q=(0,i.Z)(K,2),W=Q[0],X=Q[1],Y=(0,a.useRef)(N);(0,a.useEffect)((function(){c.showFooterHandler(!0),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(v),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){k(e.items),Y.current=e.items,I(e.shareCode),setTimeout((function(){G(!1)}),500),t.emit("join-room",v)}))}),[]),(0,a.useEffect)((function(){return t.on("remove-item",(function(e){Y.current=Y.current.filter((function(t){return t._id!==e})),k(Y.current)})),t.on("watched-item",(function(e){Y.current=Y.current.map((function(t){return t._id===e&&!1===t.watched?t.watched=!0:t._id===e&&!0===t.watched&&(t.watched=!1),t})),k(Y.current)})),t.on("add-items",(function(e){var t=[].concat((0,n.Z)(Y.current),(0,n.Z)(e));Y.current=t,k(Y.current)})),function(){t.off("remove-item"),t.off("watched-item"),t.off("add-items")}}),[]);var $=function(e){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(v,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(c){k(N.filter((function(t){return t._id!==e}))),Y.current=N,t.emit("remove-remote-item",e,v)}))},ee=function(e){p("/collections/".concat(b,"/").concat(D,"/").concat(v,"/details/").concat(e))},te=function(e,c){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(v,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({watched:!c})}).then((function(c){k(N.map((function(t){return t._id===e&&!1===t.watched?t.watched=!0:t._id===e&&!0===t.watched&&(t.watched=!1),t}))),Y.current=N,t.emit("watched-remote-item",e,v)}))},ce=(0,a.useState)(""),ne=(0,i.Z)(ce,2),ie=ne[0],ae=ne[1],oe=(0,a.useMemo)((function(){return N.filter((function(e){return e.title.toLowerCase().includes(ie.toLowerCase())}))}),[N,ie]);return(0,g.jsx)(a.Fragment,{children:(0,g.jsxs)("div",{className:"content",children:[(0,g.jsx)("img",{src:r.Z,alt:"Back symbol",className:"top-left",onClick:function(){t.emit("leave-room",v),q(!0),setTimeout((function(){q(!1),p("/collections/".concat(b))}),1e3)},style:V?{animation:"button-press .75s"}:null}),_?(0,g.jsx)("input",{className:"title",style:{gridColumn:"5/14",marginBottom:"10px"},value:D,onChange:function(e){return F(e.target.value)}}):(0,g.jsx)("h2",{className:"title",children:D}),(0,g.jsx)("img",{src:_?f:h,className:"edit",alt:"Edit icon",onClick:function(){_?""!==D?D!==x?fetch("https://choice-champ-backend.glitch.me/collections/name/".concat(v),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:D})}).then((function(e){y(!1)})):y(!1):alert("Collection name cannot be empty"):y(!0)}}),(0,g.jsxs)("div",{className:"share-code",children:["share code: ",z]}),(0,g.jsx)("img",{src:u,alt:"Add icon",className:"add",onClick:function(){X(!0),setTimeout((function(){X(!1),p("/collections/".concat(b,"/").concat(D,"/").concat(v,"/add"))}),1e3)},style:W?{animation:"button-press .75s"}:null}),(0,g.jsx)("input",{className:"search-bar",placeholder:"Search Collection",value:ie,onChange:function(e){return ae(e.target.value)}}),(0,g.jsx)(m.G,{icon:d.bDz,size:"xl",onClick:function(){H(!0)},className:A?"active-categorize":"inactive-categorize"}),(0,g.jsx)(m.G,{icon:d.SZw,size:"xl",onClick:function(){H(!1)},className:A?"inactive-categorize":"active-categorize"}),U?(0,g.jsx)(l.Z,{type:"beat",className:"list-loading",size:20}):(0,g.jsxs)("div",{className:"game"===b?"collection-content-game":"collection-content",children:[0===oe.length&&""===ie&&(0,g.jsx)("p",{className:"no-items",children:"No items in this collection"}),0===oe.length&&""!==ie&&(0,g.jsx)("p",{className:"no-items",children:"No items match search"}),A?(0,n.Z)(oe).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return e.watched?null:(0,g.jsxs)("div",{className:"item-section",onClick:_?null:function(){ee(e.itemId)},children:[_?(0,g.jsx)("img",{className:"movie"===b||"tv"===b?"item-img":"game"===b?"game-img":"board-img",src:e.poster}):(0,g.jsx)("img",{className:"movie"===b||"tv"===b?"item-img clickable":"game"===b?"game-img clickable":"board-img clickable",src:e.poster}),"game"===b||"board"===b&&(0,g.jsx)("p",{children:e.title}),_?(0,g.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action",onClick:function(){$(e._id)}}):null,_?(0,g.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"item-action-watched",onClick:function(){te(e._id)}}):null]},e.itemId)})):(0,n.Z)(oe).reverse().map((function(e){return e.watched?null:(0,g.jsxs)("div",{className:"item-section",onClick:_?null:function(){ee(e.itemId)},children:[_?(0,g.jsx)("img",{className:"movie"===b||"tv"===b?"item-img":"game"===b?"game-img":"board-img",src:e.poster}):(0,g.jsx)("img",{className:"movie"===b||"tv"===b?"item-img clickable":"game"===b?"game-img clickable":"board-img clickable",src:e.poster}),"game"===b||"board"===b&&(0,g.jsx)("p",{children:e.title}),_?(0,g.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action",onClick:function(){$(e._id)}}):null,_?(0,g.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"item-action-watched",onClick:function(){te(e._id)}}):null]},e.itemId)})),oe.filter((function(e){return e.watched})).length>0?(0,g.jsx)("div",{className:"game"===b?"divider-game":"divider-other"}):null,A?(0,n.Z)(oe).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return e.watched?(0,g.jsxs)("div",{className:"item-section",onClick:_?null:function(){ee(e.itemId)},children:[(0,g.jsx)("img",{className:"movie"===b||"tv"===b?"item-img":"game"===b?"game-img":"board-img",src:e.poster}),("game"===b||"board"===b)&&(0,g.jsx)("p",{children:e.title}),_?(0,g.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action",onClick:function(){$(e._id)}}):null,_?(0,g.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"item-action-watched",onClick:function(){te(e._id,e.watched)}}):null]},e.itemId):null})):(0,n.Z)(oe).reverse().map((function(e){return e.watched?(0,g.jsxs)("div",{className:"item-section",onClick:_?null:function(){ee(e.itemId)},children:[(0,g.jsx)("img",{className:"movie"===b||"tv"===b?"item-img":"game"===b?"game-img":"board-img",src:e.poster}),("game"===b||"board"===b)&&(0,g.jsx)("p",{children:e.title}),_?(0,g.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action",onClick:function(){$(e._id)}}):null,_?(0,g.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"item-action-watched",onClick:function(){te(e._id,e.watched)}}):null]},e.itemId):null}))]})]})})}},4297:function(e,t,c){e.exports=c.p+"static/media/add.28df205f935a3975dcff.png"},8378:function(e,t,c){e.exports=c.p+"static/media/edit.da72498c9a63add0149a.png"},2852:function(e,t,c){e.exports=c.p+"static/media/editing.e007df67d027caed3e0d.png"}}]);
//# sourceMappingURL=699.f31f4e33.chunk.js.map