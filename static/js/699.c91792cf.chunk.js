"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[699],{5699:function(e,t,c){c.r(t),c.d(t,{default:function(){return f}});var n=c(3433),i=c(9439),a=c(2791),o=c(7689),l=c(3108),s=c(5382),r=c(9806),m=c(1632),d=c(8378),u=c(2852),h=c(184),f=function(e){var t=e.socket,c=(0,a.useContext)(l.V),f=(0,o.s0)(),p=(0,o.UO)().type,g=(0,o.UO)().id,b=(0,o.UO)().name,k=(0,a.useState)([]),v=(0,i.Z)(k,2),x=v[0],j=v[1],N=(0,a.useState)(!1),C=(0,i.Z)(N,2),y=C[0],w=C[1],Z=(0,a.useState)(0),S=(0,i.Z)(Z,2),_=S[0],T=S[1],z=(0,a.useState)(!0),I=(0,i.Z)(z,2),B=I[0],E=I[1],O=(0,a.useState)((0,o.UO)().name),D=(0,i.Z)(O,2),G=D[0],F=D[1],M=(0,a.useState)(!1),U=(0,i.Z)(M,2),L=U[0],A=U[1],H=(0,a.useState)(!1),J=(0,i.Z)(H,2),P=J[0],V=J[1],R=(0,a.useState)(!1),q=(0,i.Z)(R,2),K=q[0],Q=q[1],W=(0,a.useState)(!1),X=(0,i.Z)(W,2),Y=X[0],$=X[1],ee=(0,a.useRef)(x),te=(0,o.TH)().hash;(0,a.useEffect)((function(){c.showFooterHandler(!0),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(g),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){j(e.items),ee.current=e.items,T(e.shareCode),setTimeout((function(){E(!1),te&&setTimeout((function(){document.getElementById(te.substring(1)).scrollIntoView({behavior:"smooth"})}),500)}),500),t.emit("join-room",g)}))}),[c,g,t]),(0,a.useEffect)((function(){return t.on("remove-item",(function(e){ee.current=ee.current.filter((function(t){return t._id!==e})),j(ee.current)})),t.on("watched-item",(function(e){ee.current=ee.current.map((function(t){return t._id===e&&!1===t.watched?t.watched=!0:t._id===e&&!0===t.watched&&(t.watched=!1),t})),j(ee.current)})),t.on("add-item",(function(e){ee.current=[].concat((0,n.Z)(ee.current),[e]),j(ee.current)})),function(){t.off("remove-item"),t.off("watched-item"),t.off("add-item")}}),[t]);var ce=function(e){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(g,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(c){ee.current=ee.current.filter((function(t){return t._id!==e})),j(ee.current),t.emit("remove-remote-item",e,g)}))},ne=function(e){f("/collections/".concat(p,"/").concat(G,"/").concat(g,"/details/").concat(e))},ie=function(e,c){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(g,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({watched:!c})}).then((function(c){j(x.map((function(t){return t._id===e&&!1===t.watched?(t.watched=!0,t.timestamp=Math.floor(Date.now()/1e3)):t._id===e&&!0===t.watched&&(t.watched=!1,t.timestamp=void 0),t}))),ee.current=x,t.emit("watched-remote-item",e,g)}))},ae=(0,a.useState)(""),oe=(0,i.Z)(ae,2),le=oe[0],se=oe[1],re=(0,a.useMemo)((function(){return x.filter((function(e){return e.title.toLowerCase().includes(le.toLowerCase())}))}),[x,le]);return(0,h.jsx)(a.Fragment,{children:(0,h.jsxs)("div",{className:"content",children:[K?(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button-active.png?v=1702137193420",alt:"Back symbol",className:"top-left clickable",style:{animation:"button-press .75s"}}):(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button.png?v=1702137134668",alt:"Back symbol",className:"top-left clickable",onClick:function(){t.emit("leave-room",g),Q(!0),setTimeout((function(){Q(!1),f("/collections/".concat(p))}),1e3)}}),y?(0,h.jsx)("input",{className:"title",style:{gridColumn:"5/14",marginBottom:"10px"},value:G,onChange:function(e){return F(e.target.value)}}):(0,h.jsx)("h2",{className:"title",children:G}),(0,h.jsx)("img",{src:y?u:d,className:"edit clickable",alt:"Edit icon",onClick:function(){y?""!==G?G!==b?fetch("https://choice-champ-backend.glitch.me/collections/name/".concat(g),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:G})}).then((function(e){w(!1)})):w(!1):alert("Collection name cannot be empty"):w(!0)},style:y?{animation:"button-press .75s"}:null}),(0,h.jsxs)("div",{className:"share-code",children:["share code: ",_]}),Y?(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/plus-button-active.png?v=1702137827635",alt:"Add icon",className:"add clickable",style:{animation:"button-press .75s"}}):(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/plus-button.png?v=1702138169050",alt:"Add icon",className:"add clickable",onClick:function(){$(!0),setTimeout((function(){$(!1),f("/collections/".concat(p,"/").concat(G,"/").concat(g,"/add"))}),1e3)}}),(0,h.jsx)("input",{className:"search-bar",placeholder:"Search Collection",value:le,onChange:function(e){return se(e.target.value)}}),(0,h.jsx)(r.G,{icon:m.SZw,size:"xl",onClick:function(){A(!1),V(!1)},className:L||P?"category-icon clickable":"active-categorize category-icon clickable",id:"category-clock"}),(0,h.jsx)(r.G,{icon:m.bDz,size:"xl",onClick:function(){A(!0),V(!1)},className:L?"active-categorize category-icon clickable":"category-icon clickable",id:"category-alph"}),(0,h.jsx)(r.G,{icon:"game"===p?m.l9D:"board"===p?m.rvC:m.Mdf,size:"xl",onClick:function(){V(!0),A(!1)},className:P?"active-categorize category-icon clickable":"category-icon clickable",id:"category-watch"}),(0,h.jsx)("span",{id:"chrono-label",className:"category-label",style:L||P?null:{color:"#FCB016"},children:"recent"}),(0,h.jsx)("span",{id:"alph-label",className:"category-label",style:L?{color:"#FCB016"}:null,children:"a-z"}),(0,h.jsx)("span",{id:"watched-label",className:"category-label",style:P?{color:"#FCB016"}:null,children:"game"===p||"board"===p?"played":"watched"}),B?(0,h.jsx)(s.Z,{type:"beat",className:"list-loading",size:20}):(0,h.jsxs)("div",{className:"collection-content",children:[0===re.length&&""===le&&!P&&(0,h.jsx)("p",{className:"no-items",children:"No items in this collection"}),0===re.length&&""!==le&&(0,h.jsx)("p",{className:"no-items",children:"No items match search"}),L&&!P?(0,n.Z)(re).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return e.watched?null:(0,h.jsxs)("div",{className:"item-section",id:e.itemId,onClick:y?null:function(){ne(e.itemId)},children:[y?(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===p||"tv"===p||"game"===p?"item-img":"board-img",src:e.poster}):(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===p||"tv"===p||"game"===p?"item-img clickable":"board-img clickable",src:e.poster}),y?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){ce(e._id)}}):null,y?(0,h.jsx)(r.G,{icon:"game"===p?m.l9D:"board"===p?m.rvC:m.Mdf,size:"xl",className:"item-action-watched clickable",onClick:function(){ie(e._id)}}):null]},e.itemId)})):(0,n.Z)(re).reverse().map((function(e){return e.watched||P?null:(0,h.jsxs)("div",{className:"item-section",id:e.itemId,onClick:y?null:function(){ne(e.itemId)},children:[y?(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===p||"tv"===p||"game"===p?"item-img":"board-img",src:e.poster}):(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===p||"tv"===p||"game"===p?"item-img clickable":"board-img clickable",src:e.poster}),y?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){ce(e._id)}}):null,y?(0,h.jsx)(r.G,{icon:"game"===p?m.l9D:"board"===p?m.rvC:m.Mdf,size:"xl",className:"item-action-watched clickable",onClick:function(){ie(e._id)}}):null]},e.itemId)})),P&&(0===(0,n.Z)(re).filter((function(e){return e.watched})).length&&""===le?"game"===p||"board"===p?(0,h.jsx)("p",{className:"no-items",children:"No played items"}):(0,h.jsx)("p",{className:"no-items",children:"No watched items"}):(0,n.Z)(re).filter((function(e){return e.watched})).sort((function(e,t){return e.timestamp-t.timestamp})).reverse().map((function(e){return(0,h.jsxs)("div",{className:"item-section",id:e.itemId,onClick:y?null:function(){ne(e.itemId)},children:[(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===p||"tv"===p||"game"===p?"item-img":"board-img",src:e.poster}),y?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"item-action clickable",onClick:function(){ce(e._id)}}):null,y?(0,h.jsx)(r.G,{icon:"game"===p?m.l9D:"board"===p?m.rvC:m.Mdf,size:"xl",className:"item-action-watched clickable",onClick:function(){ie(e._id,e.watched)},style:{color:"#FCB016"}}):null]},e.itemId)})))]})]})})}},8378:function(e,t,c){e.exports=c.p+"static/media/edit.da72498c9a63add0149a.png"},2852:function(e,t,c){e.exports=c.p+"static/media/editing.e007df67d027caed3e0d.png"}}]);
//# sourceMappingURL=699.c91792cf.chunk.js.map