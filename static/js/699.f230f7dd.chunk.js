"use strict";(self.webpackChunkchoice_champ=self.webpackChunkchoice_champ||[]).push([[699],{5541:function(e,t,c){c(2791);t.Z=c.p+"static/media/back.130646437979786be8370a1fdf68655a.svg"},5699:function(e,t,c){c.r(t),c.d(t,{default:function(){return g}});var a=c(3433),i=c(9439),n=c(2791),l=c(7689),o=c(3108),s=c(5382),m=c(9806),d=c(1632),r=(c(5541),c(4297),c(8378)),u=c(2852),h=c(184),g=function(e){var t=e.socket,c=(0,n.useContext)(o.V),g=(0,l.s0)(),f=(0,l.UO)().type,b=(0,l.UO)().id,p=(0,l.UO)().name,k=(0,n.useState)([]),v=(0,i.Z)(k,2),w=v[0],x=v[1],j=(0,n.useState)(!1),N=(0,i.Z)(j,2),C=N[0],y=N[1],Z=(0,n.useState)(0),_=(0,i.Z)(Z,2),S=_[0],I=_[1],T=(0,n.useState)(!0),E=(0,i.Z)(T,2),O=E[0],z=E[1],B=(0,n.useState)((0,l.UO)().name),U=(0,i.Z)(B,2),D=U[0],G=U[1],L=(0,n.useState)(!1),A=(0,i.Z)(L,2),F=A[0],H=A[1],J=(0,n.useState)(!1),M=(0,i.Z)(J,2),P=M[0],V=M[1],R=(0,n.useState)(!1),q=(0,i.Z)(R,2),K=q[0],Q=q[1],W=(0,n.useRef)(w),X=(0,l.TH)().hash;(0,n.useEffect)((function(){c.showFooterHandler(!0),fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(b),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){x(e.items),W.current=e.items,I(e.shareCode),setTimeout((function(){z(!1),X&&setTimeout((function(){document.getElementById(X.substring(1)).scrollIntoView({behavior:"smooth"})}),500)}),500),t.emit("join-room",b)}))}),[c,b,t]),(0,n.useEffect)((function(){return t.on("remove-item",(function(e){W.current=W.current.filter((function(t){return t._id!==e})),x(W.current)})),t.on("watched-item",(function(e){W.current=W.current.map((function(t){return t._id===e&&!1===t.watched?t.watched=!0:t._id===e&&!0===t.watched&&(t.watched=!1),t})),x(W.current)})),t.on("add-item",(function(e){W.current=[].concat((0,a.Z)(W.current),[e]),x(W.current)})),function(){t.off("remove-item"),t.off("watched-item"),t.off("add-item")}}),[t]);var Y=function(e){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(b,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(c){W.current=W.current.filter((function(t){return t._id!==e})),x(W.current),t.emit("remove-remote-item",e,b)}))},$=function(e){g("/collections/".concat(f,"/").concat(D,"/").concat(b,"/details/").concat(e))},ee=function(e,c){fetch("https://choice-champ-backend.glitch.me/collections/items/".concat(b,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({watched:!c})}).then((function(c){x(w.map((function(t){return t._id===e&&!1===t.watched?(t.watched=!0,t.timestamp=Math.floor(Date.now()/1e3)):t._id===e&&!0===t.watched&&(t.watched=!1,t.timestamp=void 0),t}))),W.current=w,t.emit("watched-remote-item",e,b)}))},te=(0,n.useState)(""),ce=(0,i.Z)(te,2),ae=ce[0],ie=ce[1],ne=(0,n.useMemo)((function(){return w.filter((function(e){return e.title.toLowerCase().includes(ae.toLowerCase())}))}),[w,ae]);return(0,h.jsx)(n.Fragment,{children:(0,h.jsxs)("div",{className:"content",children:[P?(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button-active.png?v=1702137193420",alt:"Back symbol",className:"top-left clickable",style:{animation:"button-press .75s"}}):(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/back-button.png?v=1702137134668",alt:"Back symbol",className:"top-left clickable",onClick:function(){t.emit("leave-room",b),V(!0),setTimeout((function(){V(!1),g("/collections/".concat(f))}),1e3)}}),C?(0,h.jsx)("input",{className:"title",style:{gridColumn:"5/14",marginBottom:"10px"},value:D,onChange:function(e){return G(e.target.value)}}):(0,h.jsx)("h2",{className:"title",children:D}),(0,h.jsx)("img",{src:C?u:r,className:"edit clickable",alt:"Edit icon",onClick:function(){C?""!==D?D!==p?fetch("https://choice-champ-backend.glitch.me/collections/name/".concat(b),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:D})}).then((function(e){y(!1)})):y(!1):alert("Collection name cannot be empty"):y(!0)}}),(0,h.jsxs)("div",{className:"share-code",children:["share code: ",S]}),K?(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/plus-button-active.png?v=1702137827635",alt:"Add icon",className:"add clickable",style:{animation:"button-press .75s"}}):(0,h.jsx)("img",{src:"https://cdn.glitch.global/ebf12691-ad1e-4a83-81e2-641b9d7c5f64/plus-button.png?v=1702138169050",alt:"Add icon",className:"add clickable",onClick:function(){Q(!0),setTimeout((function(){Q(!1),g("/collections/".concat(f,"/").concat(D,"/").concat(b,"/add"))}),1e3)}}),(0,h.jsx)("input",{className:"search-bar",placeholder:"Search Collection",value:ae,onChange:function(e){return ie(e.target.value)}}),(0,h.jsx)(m.G,{icon:d.bDz,size:"xl",onClick:function(){H(!0)},className:F?"active-categorize clickable":"clickable"}),(0,h.jsx)(m.G,{icon:d.SZw,size:"xl",onClick:function(){H(!1)},className:F?"clickable":"active-categorize clickable"}),O?(0,h.jsx)(s.Z,{type:"beat",className:"list-loading",size:20}):(0,h.jsxs)("div",{className:"game"===f?"collection-content-game":"collection-content",children:[0===ne.length&&""===ae&&(0,h.jsx)("p",{className:"no-items",children:"No items in this collection"}),0===ne.length&&""!==ae&&(0,h.jsx)("p",{className:"no-items",children:"No items match search"}),F?(0,a.Z)(ne).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return e.watched?null:(0,h.jsxs)("div",{className:"item-section",id:e.itemId,onClick:C?null:function(){$(e.itemId)},children:[C?(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===f||"tv"===f?"item-img":"game"===f?"game-img":"board-img",src:e.poster}):(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===f||"tv"===f?"item-img clickable":"game"===f?"game-img clickable":"board-img clickable",src:e.poster}),("game"===f||"board"===f)&&(0,h.jsx)("p",{children:e.title}),C?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"game"===f?"item-action-game clickable":"item-action clickable",onClick:function(){Y(e._id)}}):null,C?(0,h.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"game"===f?"item-action-watched-game clickable":"item-action-watched clickable",onClick:function(){ee(e._id)}}):null]},e.itemId)})):(0,a.Z)(ne).reverse().map((function(e){return e.watched?null:(0,h.jsxs)("div",{className:"item-section",id:e.itemId,onClick:C?null:function(){$(e.itemId)},children:[C?(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===f||"tv"===f?"item-img":"game"===f?"game-img":"board-img",src:e.poster}):(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===f||"tv"===f?"item-img clickable":"game"===f?"game-img clickable":"board-img clickable",src:e.poster}),("game"===f||"board"===f)&&(0,h.jsx)("p",{children:e.title}),C?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"game"===f?"item-action-game clickable":"item-action clickable",onClick:function(){Y(e._id)}}):null,C?(0,h.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"game"===f?"item-action-watched-game clickable":"item-action-watched clickable",onClick:function(){ee(e._id)}}):null]},e.itemId)})),ne.filter((function(e){return e.watched})).length>0?(0,h.jsx)("div",{className:"game"===f?"divider-game":"divider-other"}):null,F?(0,a.Z)(ne).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return e.watched?(0,h.jsxs)("div",{className:"item-section",id:e.itemId,onClick:C?null:function(){$(e.itemId)},children:[(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===f||"tv"===f?"item-img":"game"===f?"game-img":"board-img",src:e.poster}),("game"===f||"board"===f)&&(0,h.jsx)("p",{children:e.title}),C?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"game"===f?"item-action-game clickable":"item-action clickable",onClick:function(){Y(e._id)}}):null,C?(0,h.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"game"===f?"item-action-watched-game clickable":"item-action-watched clickable",onClick:function(){ee(e._id,e.watched)}}):null]},e.itemId):null})):(0,a.Z)(ne).filter((function(e){return e.watched})).sort((function(e,t){return e.timestamp-t.timestamp})).reverse().map((function(e){return(0,h.jsxs)("div",{className:"item-section",id:e.itemId,onClick:C?null:function(){$(e.itemId)},children:[(0,h.jsx)("img",{alt:"".concat(e.title," poster"),className:"movie"===f||"tv"===f?"item-img":"game"===f?"game-img":"board-img",src:e.poster}),("game"===f||"board"===f)&&(0,h.jsx)("p",{children:e.title}),C?(0,h.jsx)("img",{src:"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/remove.png?v=1682136649433",alt:"".concat(e.title," poster"),className:"game"===f?"item-action-game clickable":"item-action clickable",onClick:function(){Y(e._id)}}):null,C?(0,h.jsx)("img",{src:e.watched?"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/watched.png?v=1682136650141":"https://cdn.glitch.global/7cdfb78e-767d-42ef-b9ca-2f58981eb393/unwatched.png?v=1682136649813",alt:"".concat(e.title," poster"),className:"game"===f?"item-action-watched-game clickable":"item-action-watched clickable",onClick:function(){ee(e._id,e.watched)}}):null]},e.itemId)}))]})]})})}},4297:function(e,t,c){e.exports=c.p+"static/media/add.28df205f935a3975dcff.png"},8378:function(e,t,c){e.exports=c.p+"static/media/edit.da72498c9a63add0149a.png"},2852:function(e,t,c){e.exports=c.p+"static/media/editing.e007df67d027caed3e0d.png"}}]);
//# sourceMappingURL=699.f230f7dd.chunk.js.map